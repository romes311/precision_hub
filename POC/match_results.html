<!doctype html>
<!-- This site was created in Webflow. https://webflow.com --><!-- Last Published: Mon Nov 10 2025 19:19:25 GMT+0000 (Coordinated Universal Time) -->
<html
  data-wf-domain="www.impactscoring.net"
  data-wf-page="66ace76224878b8eba7d18dd"
  data-wf-site="6694c6c29e02d8f65108d18a"
>
  <head>
    <meta charset="utf-8" />
    <title>Match Results</title>
    <meta content="Match Results" property="og:title" />
    <meta content="Match Results" property="twitter:title" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link
      href="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/css/dings-impact-scoring.webflow.shared.11c58208c.css"
      rel="stylesheet"
      type="text/css"
    />
    <script type="text/javascript">
      !(function (o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        ((n.className += t + "js"),
          ("ontouchstart" in o ||
            (o.DocumentTouch && c instanceof DocumentTouch)) &&
            (n.className += t + "touch"));
      })(window, document);
    </script>
    <link
      href="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66c78355c74970d23133a04f_favicon%20new.png"
      rel="shortcut icon"
      type="image/x-icon"
    />
    <link
      href="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66c7835a8ffb3b85909c5339_favicon%20new%20256.webp"
      rel="apple-touch-icon"
    />
    <script
      async=""
      src="https://www.googletagmanager.com/gtag/js?id=G-DDQCY3D77B"
    ></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("set", "developer_id.dZGVlNj", true);
      gtag("js", new Date());
      gtag("config", "G-DDQCY3D77B");
    </script>
    <script
      src="https://www.google.com/recaptcha/api.js"
      type="text/javascript"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"
    />

    <style>
      .page-content {
        visibility: hidden;
        /*    animation: fadeInFromNone .2s ease-out;*/
      }

      .show-link {
        visibility: hidden;
      }

      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }

      textarea {
        resize: none !important;
      }

      @keyframes fadeInFromNone {
        0% {
          visibility: hidden;
          opacity: 0;
        }

        1% {
          visibility: visible;
          opacity: 0;
        }

        100% {
          visibility: visible;
          opacity: 1;
        }
      }

      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        color: white;
        padding: 6px 10px;
        border-radius: 4px;
        white-space: nowrap;
        z-index: 99;
        font-size: 14px;
      }

      .page-slug {
        width: fit-content;
      }

      .file-upload-input {
        inset: 0;
        opacity: 0;
        cursor: pointer;
        position: absolute;
      }

      .line-clamp-1 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 1;
      }

      .line-clamp-2 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
      }

      .overflow-visible {
        overflow: visible;
      }

      .dropdown-segment-toggle .form-input-label {
        cursor: pointer;
      }

      .light-modal-content {
        background-color: white !important;
      }

      .light-modal-body .croppr-overlay {
        background-color: transparent !important;
      }

      .light-modal-close-btn:nth-child(2) {
        display: none;
      }

      .light-modal-close-btn,
      .light-modal-close-icon {
        background-color: var(--primary-blue) !important;
      }

      .mobile-display {
        display: none !important;
      }

      @media screen and (max-width: 991px) {
        .mobile-display {
          display: block !important;
        }
      }

      /***************************************/
      .modal-button.form-submit {
        width: 100% !important;
        min-width: unset !important;
      }

      .w-slider-dot {
        background-color: #495674;
        color: #495674;
      }

      .w-slider-dot.w-active {
        background-color: #16254c;
        color: #16254c;
        scale: 1.2;
      }

      .team-status {
        background-color: #00c7be;
        padding: 2px 6px;
        border-radius: 10px;
        color: white;
      }

      .shooter-ro {
        background-color: #4141fb;
        padding: 2px 6px;
        border-radius: 10px;
        color: white;
        word-break: keep-all;
      }

      .shooter-md {
        background-color: #070089;
        padding: 2px 6px;
        border-radius: 10px;
        color: white;
        word-break: keep-all;
      }

      /* Tabs container */
      .manage-page-tabs {
        display: flex;
        border-radius: 25px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: 1px solid #0a3161;
        width: fit-content;
      }

      /* Individual tabs */
      .manage-page-tab {
        flex: 1;
        text-align: center;
        padding: 10px 20px;
        cursor: pointer;
        background-color: white;
        color: #333;
        font-size: 16px;
        transition:
          background-color 0.3s,
          color 0.3s;
      }

      /* Hover effect */
      .manage-page-tab:hover {
        background-color: #d6d6d6;
      }

      /* Active tab styling */
      .manage-page-tab.active {
        background-color: #0a3161;
        color: #fff;
      }

      /***************************************/

      .dropzone-upload-area-image {
        padding: 0px;
        position: relative;
        text-align: center;
        display: flex;
        align-items: center;

        cursor: pointer;
        width: 255px;
        height: 255px;
        margin: 0;
        background: #f9f9f9;
        border: 0px;
      }

      .dropzone-upload-area-image.circle {
        margin: 0 auto;
        background: #f9f9f9;
        border-radius: 100%;
      }

      .dropzone-upload-area-image .dz-preview {
        pointer-events: none;
        width: 100%;
        height: 100%;
        margin: 0;
        display: flex;
        align-items: center;
      }

      .dropzone-upload-area-image .dz-preview.dz-image-preview {
        background-color: transparent;
      }

      .dropzone-upload-area-image .dz-preview .dz-details {
        display: none;
        z-index: auto;
      }
      .dropzone-upload-area-image .dz-preview .dz-image {
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: auto;
        border-radius: 0;
        width: 100%;
        height: 100%;
      }
      .dropzone-upload-area-image .dz-preview .dz-image img {
        display: inline-block;
        aspect-ratio: 1;
        object-fit: cover;
        height: 250px;
      }
      .dropzone-upload-area-image.circle .dz-preview .dz-image img {
        border-radius: 100%;
      }
      .dropzone-upload-area-image .dz-preview .dz-progress {
        z-index: auto;
      }
      .dropzone-upload-area-image.with-file-name .dz-preview .dz-details {
        display: block;
      }
      .dropzone-upload-area-image.with-file-name
        .dz-preview
        .dz-details
        .dz-size {
        display: none;
      }
      .dropzone-upload-area-image .dz-preview:hover .dz-image img {
        -webkit-filter: none;
      }
      .dropzone-upload-area-image .dropzone-info-text {
        font-family: Helveticanowdisplay, sans-serif;
        font-size: 20px;
        line-height: 23px;
        color: #838383;

        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
      }
      .dropzone-upload-area-image .dropzone-info-text.error {
        color: #ff0000;
        font-size: 14px;
      }

      .popup {
        z-index: 999;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background-color: rgba(0, 0, 0, 0.76);
      }

      .popup.active {
        display: flex;
      }

      .popup .popup-content {
        box-shadow: 4px 4px 2px 0 rgba(0, 0, 0, 0.15);
        width: 600px;
        padding: 25px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        display: flex;
      }

      .popup .popup-content .popup-icon {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        user-drag: none;
        -webkit-user-drag: none;
        margin-bottom: 20px;
        text-align: center;
      }
      .popup .popup-content .popup-icon img {
        height: 55px;
      }
      .popup .popup-content .popup-title {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        user-drag: none;
        -webkit-user-drag: none;
        text-align: center;
        margin-bottom: 20px;
      }
      .popup .popup-content .popup-subtitle {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        user-drag: none;
        -webkit-user-drag: none;
        font-size: 18px;
        text-align: center;
        margin-bottom: 35px;
      }

      .cropper-image-container {
        width: 100%;
        margin-bottom: 10px;
        aspect-ratio: 1;
        overflow: auto;
      }

      .cropper-preview-area-top-container {
        display: flex;
        margin-bottom: 10px;
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC);
      }

      .cropper-preview-area-top-container.circle {
        border-radius: 100%;
        overflow: hidden;
      }

      .cropper-view-box.circle {
        background-color: silver;
        border-radius: 100%;
        overflow: hidden;
      }

      @media only screen and (max-height: 500px) {
        .popup-content {
          zoom: 0.55;
        }
      }
    </style>
    <style>
      .data-table {
        width: 100%;
        table-layout: auto;
      }

      .data-table-header {
        /*      border-bottom: 1px solid #E1E1E1;*/
      }

      .data-table-header th {
        color: #6b7280;
        font-weight: 500;
        font-size: 15px;
        padding: 10px;
      }

      .data-table-body tr {
        border-top: 1px solid #e1e1e1;
      }

      .data-table-body td {
        text-align: center;
        color: #6b7280;
        font-weight: 500;
        font-size: 17px;
        padding: 10px;
      }

      .shooter-profile-cell {
        text-decoration: unset;
      }

      .classification {
        min-width: 150px;
        max-width: 150px;
      }

      .classification .paragraph {
        border-radius: 10rem;
        color: white;
        padding: 4px 15px;
        width: fit-content;
        margin: 0 auto;
      }

      .shooter-circle-status {
        width: 22px;
        height: 22px;
        border-radius: 100%;
        border: 2px solid white;
        left: -1px;
        top: -1px;
        position: absolute;
      }

      .shooter-circle-status.red {
        background-color: red;
      }

      .shooter-circle-status.blue {
        background-color: blue;
      }

      .team-status {
        background-color: #00c7be;
        padding: 2px 6px;
        border-radius: 10px;
        color: white;
      }

      .country-flag {
        filter: brightness(95%);
        width: 40px;
        background-color: #00000010;
      }

      @media screen and (max-width: 991px) {
        .data-table-header th {
          font-size: 13px;
          padding: 8px;
        }

        .data-table-body td {
          font-size: 15px;
          padding: 8px;
        }

        .classification {
          min-width: 125px;
          max-width: 125px;
        }

        .shooter-circle-status {
          width: 18px;
          height: 18px;
        }
      }

      @media screen and (max-width: 767px) {
        .data-table-header th {
          font-size: 11px;
          padding: 5px;
        }

        .data-table-body td {
          font-size: 11px;
          padding: 5px;
        }

        .classification {
          min-width: 110px;
          max-width: 110px;
        }

        .shooter-circle-status {
          width: 15px;
          height: 15px;
        }
      }
    </style>
  </head>
  <body class="body">
    <section class="banner-section">
      <div class="container-element">
        <div class="banner-content-wrapper">
          <div class="banner-nav-list">
            <a
              href="https://www.instagram.com/impactscoring/profilecard/?igsh=NWdkNWVoNHZtMDl3"
              target="_blank"
              class="banner-nav-image w-inline-block"
              ><img
                src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d0cc06f861444db70820_Instagram%20Icon.png"
                loading="lazy"
                alt="" /></a
            ><a
              href="https://www.facebook.com/share/19fY54EAmo/?mibextid=LQQJ4d"
              target="_blank"
              class="banner-nav-image w-inline-block"
              ><img
                src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d0cc729e0095adef02ac_Facebook%20Icon.png"
                loading="lazy"
                alt=""
            /></a>
          </div>
          <div class="empty-block"></div>
          <div
            data-hover="false"
            data-delay="0"
            class="banner-menu-dropdown login-banner-menu w-dropdown"
          >
            <div class="banner-menu-toggle w-dropdown-toggle">
              <div>Login/Register</div>
              <div
                class="banner-menu-chevron-icon w-icon-dropdown-toggle"
              ></div>
            </div>
            <nav class="banner-menu-dropdown-list w-dropdown-list">
              <a
                data-w-id="635613f9-fc05-2d48-08d7-05e94c233672"
                href="#"
                class="banner-menu-dropdown-item menu-login w-dropdown-link"
                >Login</a
              ><a
                data-w-id="635613f9-fc05-2d48-08d7-05e94c233674"
                href="#"
                class="banner-menu-dropdown-item menu-register w-dropdown-link"
                >Register</a
              >
            </nav>
          </div>
          <div
            data-hover="false"
            data-delay="0"
            class="banner-menu-dropdown account-banner-menu w-dropdown"
          >
            <div class="banner-menu-toggle w-dropdown-toggle">
              <img
                src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e9e10f13e559525c0cc3a_Profile%20Icon.png"
                loading="lazy"
                alt=""
                class="account-profile-icon"
              />
              <div class="account-profile-name">Account</div>
              <div
                class="banner-menu-chevron-icon w-icon-dropdown-toggle"
              ></div>
            </div>
            <nav class="banner-menu-dropdown-list w-dropdown-list">
              <a
                href="/account-settings"
                class="banner-menu-dropdown-item w-dropdown-link"
                >Account Settings</a
              ><a
                href="#"
                class="banner-menu-dropdown-item menu-public-profile w-dropdown-link"
                >My Public Profile</a
              ><a
                href="/ads/manage"
                class="banner-menu-dropdown-item menu-ads-management w-dropdown-link"
                >Ads Management</a
              ><a
                href="#"
                class="banner-menu-dropdown-item menu-logout w-dropdown-link"
                >Log out</a
              >
            </nav>
          </div>
        </div>
      </div>
    </section>
    <section class="nav-section">
      <div
        data-animation="default"
        data-collapse="medium"
        data-duration="400"
        data-easing="ease"
        data-easing2="ease"
        role="banner"
        class="navbar-element w-nav"
      >
        <div class="container-element w-container">
          <a href="/" class="w-nav-brand"
            ><img
              src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final.png"
              loading="lazy"
              width="Auto"
              height="Auto"
              alt=""
              srcset="
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-500.png   500w,
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-800.png   800w,
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-1080.png 1080w,
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-1600.png 1600w,
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-2000.png 2000w,
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-2600.png 2600w,
                https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final.png        3157w
              "
              sizes="(max-width: 767px) 98vw, (max-width: 991px) 727.96875px, 939.984375px"
              class="logo-image"
          /></a>
          <nav role="navigation" class="nav-menu w-nav-menu">
            <div
              data-hover="false"
              data-delay="0"
              class="nav-menu-dropdown login-nav-menu w-dropdown"
            >
              <div class="nav-menu-dropdown-toggle w-dropdown-toggle">
                <div>Login/Register</div>
                <div class="nav-menu-chevron-icon w-icon-dropdown-toggle"></div>
              </div>
              <nav class="nav-menu-dropdown-list w-dropdown-list">
                <a
                  data-w-id="5e6e95ba-8e0b-62b5-c455-f3157407ac21"
                  href="#"
                  class="nav-menu-dropdown-item menu-login w-dropdown-link"
                  >Login</a
                ><a
                  data-w-id="39b618dd-954b-e4b4-3bce-7e358d568f5b"
                  href="#"
                  class="nav-menu-dropdown-item menu-register w-dropdown-link"
                  >Register</a
                >
              </nav>
            </div>
            <div
              data-hover="false"
              data-delay="0"
              class="nav-menu-dropdown account-nav-menu w-dropdown"
            >
              <div class="nav-menu-dropdown-toggle w-dropdown-toggle">
                <img
                  src="https://cdn.prod.website-files.com/plugins/Basic/assets/placeholder.60f9b1840c.svg"
                  loading="lazy"
                  alt=""
                  class="account-profile-icon"
                />
                <div class="account-profile-name"> </div>
                <div class="nav-menu-chevron-icon w-icon-dropdown-toggle"></div>
              </div>
              <nav class="nav-menu-dropdown-list w-dropdown-list">
                <a
                  href="/account-settings"
                  class="nav-menu-dropdown-item w-dropdown-link"
                  >Account Settings</a
                ><a
                  href="#"
                  class="nav-menu-dropdown-item menu-public-profile w-dropdown-link"
                  >My Public Profile</a
                >
              </nav>
            </div>
            <a href="/" class="header-nav-link w-nav-link">Home</a>
            <div class="nav-menu-line"></div>
            <a href="/match-gallery/list" class="header-nav-link w-nav-link"
              >Match Gallery</a
            >
            <div class="nav-menu-line"></div>
            <div
              data-hover="false"
              data-delay="0"
              class="nav-menu-dropdown w-dropdown"
            >
              <div class="nav-menu-dropdown-toggle w-dropdown-toggle">
                <div>Series</div>
                <div class="nav-menu-chevron-icon w-icon-dropdown-toggle"></div>
              </div>
              <nav
                class="nav-menu-dropdown-list nav-menu-series w-dropdown-list"
              >
                <a href="#" class="nav-menu-dropdown-item w-dropdown-link"> </a>
              </nav>
            </div>
            <div class="nav-menu-line"></div>
            <a href="/matches" class="header-nav-link w-nav-link">Matches</a>
            <div class="nav-menu-line"></div>
            <a href="/clubs" class="header-nav-link w-nav-link">Clubs</a>
            <div class="nav-menu-line"></div>
            <a href="/support-us" class="header-nav-link w-nav-link"
              >Support Us</a
            >
            <div
              data-hover="false"
              data-delay="0"
              class="nav-menu-dropdown quick-links-menu-mobile w-dropdown"
            >
              <div class="nav-menu-dropdown-toggle w-dropdown-toggle">
                <div>Quick Links</div>
                <div class="nav-menu-chevron-icon w-icon-dropdown-toggle"></div>
              </div>
              <nav class="nav-menu-dropdown-list w-dropdown-list">
                <a
                  href="/match/new"
                  class="nav-menu-dropdown-item user-btn w-dropdown-link"
                  >Create Match</a
                ><a
                  href="/club/new"
                  class="nav-menu-dropdown-item user-btn w-dropdown-link"
                  >Create Club</a
                ><a
                  href="/match-gallery/list"
                  class="nav-menu-dropdown-item user-btn w-dropdown-link"
                  >Match Highlights</a
                ><a
                  href="/test-matches"
                  class="nav-menu-dropdown-item w-dropdown-link"
                  >Test Matches</a
                >
              </nav>
            </div>
            <a href="#" class="header-nav-link menu-logout w-nav-link"
              >Log Out</a
            >
            <div class="banner-nav-list mobile-nav">
              <a
                href="https://www.instagram.com/"
                target="_blank"
                class="banner-nav-image w-inline-block"
                ><img
                  src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d0cc06f861444db70820_Instagram%20Icon.png"
                  loading="lazy"
                  alt="" /></a
              ><a
                href="https://www.facebook.com/"
                target="_blank"
                class="banner-nav-image w-inline-block"
                ><img
                  src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d0cc729e0095adef02ac_Facebook%20Icon.png"
                  loading="lazy"
                  alt="" /></a
              ><a
                href="https://www.youtube.com/"
                target="_blank"
                class="banner-nav-image w-inline-block"
                ><img
                  src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d0cc7adf73f5cac1a444_Youtube%20Icon.png"
                  loading="lazy"
                  alt=""
              /></a>
            </div>
          </nav>
          <div class="menu-button w-nav-button">
            <div class="w-icon-nav-menu"></div>
          </div>
        </div>
      </div>
      <div class="modal-element login-modal">
        <div class="modal-overlay-element"></div>
        <div class="modal-content-element">
          <a
            data-w-id="bb95d78f-f4cb-773b-7ea6-b66b836fee07"
            href="#"
            class="modal-close-element w-inline-block"
            ><img
              src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e755444e9666be3469a31_Close%20Icon.png"
              loading="lazy"
              alt=""
              class="modal-close-icon"
          /></a>
          <div class="modal-form-container">
            <h3 class="modal-title">Login to your account</h3>
            <p class="modal-description">Please fill in your details below</p>
            <div class="modal-form w-form">
              <form
                id="login-form"
                name="wf-form-Login-Form"
                data-name="Login Form"
                method="post"
                data-wf-page-id="66ace76224878b8eba7d18dd"
                data-wf-element-id="bb95d78f-f4cb-773b-7ea6-b66b836fee0f"
              >
                <div class="modal-form-content">
                  <div class="form-input-layout">
                    <img
                      loading="lazy"
                      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e7322ce8c8b53b80840d5_Email%20Icon.png"
                      alt=""
                      class="form-input-icon"
                    />
                    <div class="line-20"></div>
                    <input
                      class="form-input-field w-input"
                      maxlength="256"
                      name="Login-Email"
                      data-name="Login Email"
                      placeholder="Email Address"
                      type="email"
                      id="login-email"
                      required=""
                    />
                  </div>
                </div>
                <p class="paragraph form-error-message">
                  Something wrong, please check information again.
                </p>
                <input
                  type="submit"
                  data-wait="Logging in..."
                  class="modal-button form-submit w-button"
                  value="Login"
                />
              </form>
              <div class="w-form-done">
                <div>Thank you! Your submission has been received!</div>
              </div>
              <div class="w-form-fail">
                <div>Oops! Something went wrong while submitting the form.</div>
              </div>
            </div>
            <div class="paragraph medium no-account">
              Don’t have an account?
              <a
                href="#"
                data-w-id="bb95d78f-f4cb-773b-7ea6-b66b836fee1d"
                class="short-link menu-register"
                >Register</a
              >
            </div>
          </div>
          <div class="modal-success-container">
            <div class="modal-form-content">
              <h3 class="modal-title text-center">
                Click on the link that has been sent to your email to log in to
                your account.
              </h3>
            </div>
            <p class="paragraph form-error-message">
              Please check your email to log in to your account.
            </p>
            <a href="#" class="modal-button login-confirm-button w-button"
              >Next</a
            >
          </div>
        </div>
      </div>
      <div class="modal-element register-modal">
        <div class="modal-overlay-element"></div>
        <div class="modal-content-element">
          <a
            data-w-id="3d6f4666-31e2-6f93-af13-4533daf59da8"
            href="#"
            class="modal-close-element w-inline-block"
            ><img
              src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e755444e9666be3469a31_Close%20Icon.png"
              loading="lazy"
              alt=""
              class="modal-close-icon"
          /></a>
          <div class="modal-form-container">
            <h3 class="modal-title">Create an account</h3>
            <p class="modal-description">Please fill in your details below</p>
            <div class="modal-form w-form">
              <form
                id="register-form"
                name="wf-form-Register-Form"
                data-name="Register Form"
                method="get"
                data-wf-page-id="66ace76224878b8eba7d18dd"
                data-wf-element-id="3d6f4666-31e2-6f93-af13-4533daf59db0"
              >
                <div class="modal-form-content">
                  <div class="form-input-layout">
                    <img
                      loading="lazy"
                      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e7322ce8c8b53b80840d5_Email%20Icon.png"
                      alt=""
                      class="form-input-icon"
                    />
                    <div class="line-20"></div>
                    <input
                      class="form-input-field w-input"
                      maxlength="256"
                      name="Register-Email"
                      data-name="Register Email"
                      placeholder="Email Address"
                      type="email"
                      id="register-email"
                      required=""
                    />
                  </div>
                  <div class="form-input-layout">
                    <img
                      loading="lazy"
                      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e7c4dcba8b51369049069_Account%20Icon.png"
                      alt=""
                      class="form-input-icon"
                    />
                    <div class="line-20"></div>
                    <input
                      class="form-input-field w-input"
                      maxlength="256"
                      name="Register-Handle"
                      data-name="Register Handle"
                      placeholder="Handle"
                      type="text"
                      id="register-handle"
                      required=""
                    />
                  </div>
                </div>
                <p class="paragraph form-error-message">
                  Something wrong, please check information again.
                </p>
                <input
                  type="submit"
                  data-wait="Creating account..."
                  class="modal-button form-submit w-button"
                  value="Create Account"
                />
              </form>
              <div class="w-form-done">
                <div>Thank you! Your submission has been received!</div>
              </div>
              <div class="w-form-fail">
                <div>Oops! Something went wrong while submitting the form.</div>
              </div>
            </div>
            <div class="paragraph medium no-account">
              Already have an account?
              <a
                href="#"
                data-w-id="3d6f4666-31e2-6f93-af13-4533daf59dc2"
                class="short-link menu-login"
                >Login</a
              >
            </div>
          </div>
          <div class="modal-success-container">
            <div class="modal-form-content">
              <h3
                data-w-id="3d6f4666-31e2-6f93-af13-4533daf59dc5"
                class="modal-title text-center"
              >
                Click on the link that has been sent to your email to activate
                account.
              </h3>
            </div>
            <p class="paragraph form-error-message">
              Please check your email to activate your account.
            </p>
            <a href="#" class="modal-button login-confirm-button w-button"
              >Next</a
            >
          </div>
        </div>
      </div>
    </section>
    <section class="content-section page-content">
      <div class="w-layout-blockcontainer container-element w-container">
        <a
          data-ad-alter="WEBSITE_SCOREBOARD_TOP"
          data-location="TOP"
          data-ad="WEBSITE_SCOREBOARD_TOP_LIVE"
          href="https://vortexoptics.com/optics/riflescopes/razor.html"
          target="_blank"
          class="show-link banner w-inline-block"
          ><img
            src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d0ccc9b6ce2c0af74b47_Cart%20Icon.png"
            loading="lazy"
            alt=""
            class="show-image banner"
        /></a>
        <section>
          <div class="page-wrapper">
            <div class="w-layout-hflex horizontal-flex vertical-centered">
              <a
                href="https://mdttac.com/"
                target="_blank"
                class="w-inline-block"
                ><img
                  src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5fff0d203e2e2600c5ec7_Match%20Result%20Image1.png"
                  loading="lazy"
                  sizes="(max-width: 767px) 100vw, (max-width: 991px) 727.984375px, 764px"
                  srcset="
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5fff0d203e2e2600c5ec7_Match%20Result%20Image1-p-500.png 500w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5fff0d203e2e2600c5ec7_Match%20Result%20Image1.png       764w
                  "
                  alt=""
                  class="match-result-image1"
              /></a>
              <div class="flex-1"><h3 class="heading-3 page-title"></h3></div>
              <a
                href="https://www.calibergunsmithing.com/"
                target="_blank"
                class="w-inline-block"
                ><img
                  src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2.png"
                  loading="lazy"
                  sizes="(max-width: 767px) 100vw, (max-width: 991px) 727.953125px, 939.984375px"
                  srcset="
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-500.png   500w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-800.png   800w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-1080.png 1080w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-1600.png 1600w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-2000.png 2000w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-2600.png 2600w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2-p-3200.png 3200w,
                    https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67b5ffeb9e9cbc67e8d27e50_Match%20Result%20Image2.png        6857w
                  "
                  alt=""
                  class="match-result-image2"
              /></a>
            </div>
            <p class="paragraph medium page-description">  </p>
            <div class="w-layout-hflex list-filters-container">
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Select Division</p>
                <div
                  data-hover="false"
                  data-delay="0"
                  class="dropdown-element list-filters-divisions-dropdown w-dropdown"
                >
                  <div class="dropdown-segment-toggle w-dropdown-toggle">
                    <div class="dropdown-segment-selected line-clamp-1"> </div>
                    <div class="dropdown-icon w-icon-dropdown-toggle"></div>
                  </div>
                  <nav class="dropdown-segment-list w-dropdown-list">
                    <p class="dropdown-list-item"> </p>
                  </nav>
                </div>
              </div>
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Select Stage</p>
                <div
                  data-hover="false"
                  data-delay="0"
                  class="dropdown-element list-filters-stages-dropdown w-dropdown"
                >
                  <div class="dropdown-segment-toggle w-dropdown-toggle">
                    <div class="dropdown-segment-selected line-clamp-1"> </div>
                    <div class="dropdown-icon w-icon-dropdown-toggle"></div>
                  </div>
                  <nav class="dropdown-segment-list w-dropdown-list">
                    <p class="dropdown-list-item"> </p>
                  </nav>
                </div>
              </div>
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Select Category</p>
                <div
                  data-hover="false"
                  data-delay="0"
                  class="dropdown-element list-filters-categories-dropdown w-dropdown"
                >
                  <div class="dropdown-segment-toggle w-dropdown-toggle">
                    <div class="dropdown-segment-selected line-clamp-1"> </div>
                    <div class="dropdown-icon w-icon-dropdown-toggle"></div>
                  </div>
                  <nav class="dropdown-segment-list w-dropdown-list">
                    <p class="dropdown-list-item"> </p>
                  </nav>
                </div>
              </div>
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Select Country</p>
                <div
                  data-hover="false"
                  data-delay="0"
                  class="dropdown-element list-filters-country-dropdown w-dropdown"
                >
                  <div class="dropdown-segment-toggle w-dropdown-toggle">
                    <div class="dropdown-segment-selected line-clamp-1"> </div>
                    <div class="dropdown-icon w-icon-dropdown-toggle"></div>
                  </div>
                  <nav class="dropdown-segment-list w-dropdown-list">
                    <p class="dropdown-list-item"> </p>
                  </nav>
                </div>
              </div>
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Sort By</p>
                <div
                  data-hover="false"
                  data-delay="0"
                  class="dropdown-element list-filters-sortby-dropdown w-dropdown"
                >
                  <div class="dropdown-segment-toggle w-dropdown-toggle">
                    <div class="dropdown-segment-selected line-clamp-1"> </div>
                    <div class="dropdown-icon w-icon-dropdown-toggle"></div>
                  </div>
                  <nav class="dropdown-segment-list w-dropdown-list">
                    <p class="dropdown-list-item"> </p>
                  </nav>
                </div>
              </div>
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Filter</p>
                <div
                  data-hover="false"
                  data-delay="0"
                  class="dropdown-element list-filters-team-dropdown w-dropdown"
                >
                  <div class="dropdown-segment-toggle w-dropdown-toggle">
                    <div class="dropdown-segment-selected line-clamp-1"> </div>
                    <div class="dropdown-icon w-icon-dropdown-toggle"></div>
                  </div>
                  <nav class="dropdown-segment-list w-dropdown-list">
                    <p class="dropdown-list-item"> </p>
                  </nav>
                </div>
              </div>
              <div class="w-layout-vflex list-filter-box">
                <p class="paragraph text-grey">Search</p>
                <form
                  action="/search"
                  class="list-filter-search-wrapper w-form"
                >
                  <input
                    class="list-filter-search-input w-input"
                    maxlength="256"
                    name="query"
                    placeholder=""
                    type="search"
                    id="search"
                    required=""
                  />
                </form>
              </div>
            </div>
            <div class="live-scores-wrapper"></div>
          </div>
        </section>
      </div>
    </section>
    <section class="footer-section">
      <div class="w-layout-blockcontainer container-element w-container">
        <div class="w-layout-grid footer-nav-wrappeer">
          <div class="footer-company-info">
            <a href="/" class="w-inline-block"
              ><img
                src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final.png"
                loading="lazy"
                sizes="(max-width: 767px) 100vw, (max-width: 991px) 727.96875px, 939.984375px"
                srcset="
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-500.png   500w,
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-800.png   800w,
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-1080.png 1080w,
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-1600.png 1600w,
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-2000.png 2000w,
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final-p-2600.png 2600w,
                  https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66aa7767f9ae408a9b552902_Blue%20Red%20Black%20ISLogo%20Final.png        3157w
                "
                alt=""
                class="logo-image"
            /></a>
            <div class="text-block">
              123 W. Nye Lane<br />Carson City NV 89703<br />tincup@impactscoring.net
            </div>
            <a
              href="https://www.instagram.com/impactscoring/profilecard/?igsh=NWdkNWVoNHZtMDl3"
              target="_blank"
              class="footer-nav-icon w-inline-block"
              ><img
                src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d197874545d4974f7f4d_Instagram%20Primary%20Icon.png"
                loading="lazy"
                alt="" /></a
            ><a
              href="https://www.facebook.com/share/19fY54EAmo/?mibextid=LQQJ4d"
              target="_blank"
              class="footer-nav-icon w-inline-block"
              ><img
                src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/6694d198c1691d6a41137e83_Facebook%20Primary%20Icon.png"
                loading="lazy"
                alt=""
            /></a>
          </div>
          <div
            id="w-node-d4d38c25-7ef7-82b3-93f1-e15864416733-306b138f"
            class="w-layout-grid footer-nav-links"
          >
            <div class="footer-nav-section">
              <h1 class="heading-5 footer">Series</h1>
              <ul role="list" class="footer-nav-list footer-nav-series">
                <li class="footer-nav-list-item">
                  <a href="#" class="footer-nav-link">  </a>
                </li>
              </ul>
            </div>
            <div class="footer-nav-section">
              <h1 class="heading-5 footer">Quick Links</h1>
              <ul role="list" class="footer-nav-list">
                <li class="footer-nav-list-item user-btn">
                  <a href="/match/new" class="footer-nav-link">Create Match</a>
                </li>
                <li class="footer-nav-list-item user-btn">
                  <a href="/club/new" class="footer-nav-link">Create Club</a>
                </li>
                <li class="footer-nav-list-item">
                  <a href="/eula" class="footer-nav-link">EULA</a>
                </li>
                <li class="footer-nav-list-item">
                  <a href="/privacy-policy" class="footer-nav-link"
                    >Privacy Policy</a
                  >
                </li>
                <li class="footer-nav-list-item">
                  <a href="/support-us" class="footer-nav-link">Support Us</a>
                </li>
              </ul>
            </div>
            <div class="footer-nav-section">
              <h1 class="heading-5 footer">Resources</h1>
              <ul role="list" class="footer-nav-list">
                <li class="footer-nav-list-item">
                  <a href="/contact-us" class="footer-nav-link">Contact Us</a>
                </li>
              </ul>
            </div>
            <div class="footer-nav-section wide">
              <h1 class="heading-5 footer">Mobile apps</h1>
              <ul role="list" class="footer-nav-list">
                <li class="footer-nav-list-item">
                  <a
                    href="https://apps.apple.com/us/app/impact-scoring/id6702021327"
                    target="_blank"
                    class="footer-nav-link w-inline-block"
                    ><img
                      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66f58747fd9651728daa8b92_Apple%20Store%20Icon.png"
                      loading="lazy"
                      alt=""
                      class="footer-nav-image"
                  /></a>
                </li>
                <li class="footer-nav-list-item">
                  <a
                    href="https://play.google.com/store/apps/details?id=net.impactscoring.app"
                    target="_blank"
                    class="footer-nav-link w-inline-block"
                    ><img
                      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66f58747fd9651728daa8b7d_Google%20Play%20Icon.png"
                      loading="lazy"
                      alt=""
                      class="footer-nav-image"
                  /></a>
                </li>
                <li class="footer-nav-list-item">
                  <a
                    href="https://www.amazon.com/dp/B0D8PS5JQP"
                    target="_blank"
                    class="footer-nav-link w-inline-block"
                    ><img
                      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66f58747bf884e68993bd5e8_Amazon%20Store%20Icon.png"
                      loading="lazy"
                      alt=""
                      class="footer-nav-image"
                  /></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script
      src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6694c6c29e02d8f65108d18a"
      type="text/javascript"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/js/webflow.schunk.36b8fb49256177c8.js"
      type="text/javascript"
    ></script>
    <script
      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/js/webflow.schunk.b5d34c05225cc2a0.js"
      type="text/javascript"
    ></script>
    <script
      src="https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/js/webflow.8a4d6e89.3a13f8329968394d.js"
      type="text/javascript"
    ></script>
    <!-- <script src="https://www.google.com/recaptcha/api.js" async defer></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment-with-locales.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.45/moment-timezone-with-data.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/dropzone.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cropper/1.0.1/jquery-cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dashjs/4.7.4/dash.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.0.0/index.global.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-price-format/2.2.0/jquery.priceformat.min.js"></script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-DDQCY3D77B"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"
    ></script>
    <script src="https://app-portal.impactscoring.net/js/libs/FileSaver.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/web-streams-polyfill@2.0.2/dist/ponyfill.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/streamsaver@2.0.3/StreamSaver.min.js"></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-DDQCY3D77B");
    </script>

    <script>
      const API_ENDPOINT = "https://app-api.impactscoring.net";
      const LIST_PAGE_SIZE = 20;
      const LIST_PAGE_SIZE_SMALL = 10;
      // const RECAPTCHA_KEY = "6LeaNcIqAAAAALQQwyjodEOB8ks7gRwUs3bIlGGD";
      const MANAGE_LIST_PAGE_SIZE = 1000;
      const GALLERY_LIST_PAGE_SIZE = 4;
      const BROADCAST_LIST_PAGE_SIZE = 2;

      const ASSET_PREFIX = "https://cdn.prod.website-files.com";
      const DEFAULT_MATCH_ICON = `${ASSET_PREFIX}/6694c6c29e02d8f65108d18a/67ae2fa65cca007c0af32ef9_Match%20Icon%20Placeholder.png`;
      const DEFAULT_LEADERBOARD_ICON = `${ASSET_PREFIX}/6694c6c29e02d8f65108d18a/66968441a6bce747c2812535_423516a2fdd4f1a6f590261de68adaa0_Leaderboard%20Profile.png`;
      const DEFAULT_TEAM_ICON = `${ASSET_PREFIX}/6694c6c29e02d8f65108d18a/67e2ab58c5c520bdc49126fa_Group%20Icon.png`;

      const MATCH_GROUPINGS = [
        { id: 1, name: "Group into teams" },
        { id: 2, name: "Don't group" },
      ];

      const SHIRT_SIZES = ["S", "M", "L", "XL", "2XL", "3XL"];

      const usernameRegex = /^[a-zA-Z0-9_]+$/;

      const FLAG_PREFIX = `${ASSET_PREFIX}/6694c6c29e02d8f65108d18a/`;
      const FLAGS = {
        zm: "6811d16302a8313841eb6c28_zm.png",
        zw: "6811d163da647ba0f5d1a554_zw.png",
        wf: "6811d16252e273b3cf72d301_wf.png",
        ye: "6811d1627abc49b2c49ff393_ye.png",
        yt: "6811d162c6913f53c4104216_yt.png",
        za: "6811d162a7713a6e128ba03e_za.png",
        xk: "6811d1620e5d8639c6c53886_xk.png",
        ws: "6811d1622faf1ca5f8fbb16d_ws.png",
        vc: "6811d16252e273b3cf72d2a1_vc.png",
        vi: "6811d161abe89ecbb299bb10_vi.png",
        ve: "6811d161fb1a4cc55abb7752_ve.png",
        vn: "6811d161af642cba2d196750_vn.png",
        vg: "6811d1617eb97574d3c68223_vg.png",
        vu: "6811d161fd9c07e5ce6196a6_vu.png",
        uy: "6811d160bdd17b1118c61ec2_uy.png",
        va: "6811d160c92136775a33a411_va.png",
        ug: "6811d160f36e5a9b788401f6_ug.png",
        uz: "6811d160a6b875a2542fecf1_uz.png",
        us: "6811d160d3fe3b4004ba26a6_us.png",
        ua: "6811d15fbdd17b1118c61e02_ua.png",
        tr: "6811d15f02a8313841eb603b_tr.png",
        tz: "6811d15f55858ad6eadb879a_tz.png",
        tt: "6811d15f2ef143beee9ea78f_tt.png",
        tv: "6811d15fc9e8eea8f7439e75_tv.png",
        tw: "6811d15f1929e3210028b502_tw.png",
        tk: "6811d15e6406a7905f27d4d8_tk.png",
        tn: "6811d15dcee7c9164deda8b6_tn.png",
        tm: "6811d15d97311adc7d99c69a_tm.png",
        th: "6811d15d52e273b3cf72ceb5_th.png",
        tj: "6811d15dafbccc47a123e748_tj.png",
        to: "6811d15d78485e87cfddaba1_to.png",
        tl: "6811d15dc6913f53c4103d5e_tl.png",
        tg: "6811d15db3c5e3d3a3c5b2be_tg.png",
        td: "6811d15d498ce839459b224c_td.png",
        sz: "6811d15dd3fe3b4004ba24f8_sz.png",
        tf: "6811d15d9b2c6c80609395c8_tf.png",
        tc: "6811d15d1929e3210028b3f8_tc.png",
        sx: "6811d15b845ad6c8c927b08e_sx.png",
        st: "6811d15b845ad6c8c927b08a_st.png",
        ss: "6811d15b78a624ef805b9344_ss.png",
        sv: "6811d15b574df6e355b16af4_sv.png",
        sr: "6811d15b72a9d5793e2641d3_sr.png",
        sy: "6811d15bdfacd81243eb47cb_sy.png",
        so: "6811d15ba9cc2b3aad1f5777_so.png",
        sm: "6811d15b654a37c994c3fdb2_sm.png",
        sn: "6811d15bf2b190b74775f011_sn.png",
        sk: "6811d15bbdd17b1118c619de_sk.png",
        sl: "6811d15b0c9249f8c32df7fc_sl.png",
        sd: "6811d1593aa4c102fef56116_sd.png",
        sh: "6811d1595769e5096be006c7_sh.png",
        si: "6811d159591eb7b62bc16100_si.png",
        sg: "6811d1590e5d8639c6c52f16_sg.png",
        sc: "6811d159f1cbdf4556b34c7f_sc.png",
        se: "6811d159c9e8eea8f74396b5_se.png",
        ru: "6811d1587139df4d5fc095fc_ru.png",
        rw: "6811d1584e456840069fbdc7_rw.png",
        sb: "6811d158065dd259edcfc01e_sb.png",
        sa: "6811d157466c8e8a496fafea_sa.png",
        rs: "6811d1578368fafccc6d6173_rs.png",
        ro: "6811d157e68f9c3633039022_ro.png",
        pl: "6811d156ff0720343e23ae7c_pl.png",
        qa: "6811d156591eb7b62bc15f46_qa.png",
        py: "6811d156257dd79a1e0b7501_py.png",
        pt: "6811d15625aeade0f4ad48a2_pt.png",
        re: "6811d156a10c927f2af4f921_re.png",
        ps: "6811d1562969deaa287e8e5b_ps.png",
        pw: "6811d1557abc49b2c49fecbe_pw.png",
        pr: "6811d155e68f9c3633038f31_pr.png",
        pn: "6811d15503eadde51223434c_pn.png",
        pm: "6811d1559b2c6c8060938ef6_pm.png",
        pk: "6811d1559f72dd36d2e794d2_pk.png",
        ph: "6811d155845ad6c8c927ad8c_ph.png",
        nz: "6811d1537abc49b2c49feb79_nz.png",
        pa: "6811d1534e456840069fbbd0_pa.png",
        pg: "6811d153b9cb5aac61b16eea_pg.png",
        pf: "6811d15303eadde512234175_pf.png",
        om: "6811d1531929e3210028a6f0_om.png",
        pe: "6811d1532ef143beee9e9ecb_pe.png",
        ni: "6811d15303eadde51223414f_ni.png",
        nl: "6811d153368b512e6b8a01c4_nl.png",
        nr: "6811d152f1ba54327a43ecf3_nr.png",
        np: "6811d152a10c927f2af4f798_np.png",
        nu: "6811d1522969deaa287e8c8c_nu.png",
        nf: "6811d152368b512e6b8a0179_nf.png",
        na: "6811d15279c1a24f1a29a9f2_na.png",
        mz: "6811d152da647ba0f5d19a07_mz.png",
        nc: "6811d1522ef143beee9e9e34_nc.png",
        ne: "6811d152a9cc2b3aad1f5263_ne.png",
        ng: "6811d15297311adc7d99c078_ng.png",
        mp: "6811d15078a624ef805b8a4d_mp.png",
        mu: "6811d15079c1a24f1a29a8c5_mu.png",
        mx: "6811d150c92136775a339bec_mx.png",
        mv: "6811d150574df6e355b1654e_mv.png",
        my: "6811d150baee191612cb45c2_my.png",
        mw: "6811d1508bdc3684a9b1dc31_mw.png",
        mt: "6811d14fb01bf95a4ae5da4d_mt.png",
        mr: "6811d14f6e18e01b4369d4e7_mr.png",
        ms: "6811d14f2faf1ca5f8fb9f53_ms.png",
        mo: "6811d14fdbdd892c3b29555a_mo.png",
        mq: "6811d14f52e273b3cf72c397_mq.png",
        mn: "6811d14f79c1a24f1a29a7fc_mn.png",
        mk: "6811d14e257dd79a1e0b6fda_mk.png",
        ml: "6811d14d498ce839459b159f_ml.png",
        mm: "6811d14d02a8313841eb552c_mm.png",
        mh: "6811d14d126da15926135bfc_mh.png",
        mg: "6811d14d09525a5b39a7946b_mg.png",
        md: "6811d14d78a624ef805b8184_md.png",
        me: "6811d14c8450c0504af21302_me.png",
        mc: "6811d14c257dd79a1e0b6ec7_mc.png",
        kz: "6811d14cb98203355f412c0d_kz.png",
        ly: "6811d14cc92136775a3398a9_ly.png",
        ma: "6811d14c394760a1bc91617f_ma.png",
        lv: "6811d14cdb10cb273a42fcd2_lv.png",
        ls: "6811d14b36e5b4058af94f5a_ls.png",
        lr: "6811d14ba7713a6e128b9028_lr.png",
        lt: "6811d14bfdc1291f495ab7dd_lt.png",
        lu: "6811d14b2969deaa287e8858_lu.png",
        lk: "6811d14b1929e3210028a138_lk.png",
        li: "6811d14aeefdb37789447d54_li.png",
        lb: "6811d149dbdd892c3b295353_lb.png",
        ky: "6811d149c9e8eea8f7438d9b_ky.png",
        lc: "6811d14936e5b4058af94eb7_lc.png",
        kw: "6811d149f2b190b74775cf51_kw.png",
        la: "6811d149065dd259edcfb2b2_la.png",
        kr: "6811d1478bdc3684a9b1d79a_kr.png",
        kp: "6811d147dd9ffb99a934950f_kp.png",
        ki: "6811d147b2874d989e1998d4_ki.png",
        kn: "6811d147126da159261343f0_kn.png",
        km: "6811d1475769e5096bdff657_km.png",
        kh: "6811d147654a37c994c3e0e4_kh.png",
        kg: "6811d145db10cb273a42f7eb_kg.png",
        je: "6811d145fdc1291f495aae5e_je.png",
        ke: "6811d14591307d5365e83e2c_ke.png",
        jp: "6811d14579c1a24f1a29a1ea_jp.png",
        jo: "6811d1450e5d8639c6c51cec_jo.png",
        jm: "6811d145574df6e355b15f1f_jm.png",
        iq: "6811d145eefdb377894479dc_iq.png",
        io: "6811d1452615e015ac9ad5e4_io.png",
        it: "6811d1457abc49b2c49fd604_it.png",
        ir: "6811d145a6b875a2542fd8b7_ir.png",
        in: "6811d14497311adc7d99b5ae_in.png",
        is: "6811d14452e273b3cf72bb55_is.png",
        hu: "6811d143a6b875a2542fd7c7_hu.png",
        im: "6811d143d52be108a643c63d_im.png",
        il: "6811d143d3fe3b4004b9feb8_il.png",
        ie: "6811d1439f72dd36d2e77eb7_ie.png",
        ht: "6811d1430e5d8639c6c51c0a_ht.png",
        id: "6811d143126da1592613410a_id.png",
        hr: "6811d142da647ba0f5d17e71_hr.png",
        gh: "6811d142ff0720343e239cbc_gh.png",
        hk: "6811d141c9e8eea8f743862f_hk.png",
        hm: "6811d1419b2c6c8060937e0d_hm.png",
        gy: "6811d14102a8313841eb4d27_gy.png",
        hn: "6811d14191307d5365e83ba4_hn.png",
        gw: "6811d141c9e8eea8f743861b_gw.png",
        "gb-nir": "6811d140ff0720343e239b84_gb-nir.png",
        gr: "6811d140dfacd81243eb2eac_gr.png",
        gp: "6811d1402ef143beee9e8905_gp.png",
        gs: "6811d14025aeade0f4ad36c3_gs.png",
        gq: "6811d140a7713a6e128b894a_gq.png",
        gt: "6811d140a9cc2b3aad1f4839_gt.png",
        gu: "6811d140c9e8eea8f7438577_gu.png",
        gi: "6811d1406e18e01b4369cce2_gi.png",
        gg: "6811d140368b512e6b89f3e3_gg.png",
        gm: "6811d13f654a37c994c3ddfd_gm.png",
        gl: "6811d13fb9cb5aac61b1602a_gl.png",
        gn: "6811d13f72a9d5793e2627e9_gn.png",
        "gb-wls": "6811d13dc9e8eea8f743844f_gb-wls.png",
        gb: "6811d13d845ad6c8c927996a_gb.png",
        gf: "6811d13ddbdd892c3b294ae2_gf.png",
        ge: "6811d13db98203355f411976_ge.png",
        gd: "6811d13d9f72dd36d2e779ee_gd.png",
        "gb-sct": "6811d13d5769e5096bdfef9f_gb-sct.png",
        fo: "6811d13d03eadde512233308_fo.png",
        fm: "6811d13cfd9c07e5ce617cfe_fm.png",
        ga: "6811d13c845ad6c8c9279915_ga.png",
        fr: "6811d13c03eadde5122332e7_fr.png",
        "gb-eng": "6811d13caf642cba2d194969_gb-eng.png",
        fk: "6811d13ba7713a6e128b7dbc_fk.png",
        es: "6811d13bfd9c07e5ce617c56_es.png",
        fj: "6811d13b8bdc3684a9b1d139_fj.png",
        et: "6811d13bd3fe3b4004b9f986_et.png",
        fi: "6811d13b368b512e6b89f246_fi.png",
        er: "6811d13bc55df212370afaa6_er.png",
        bn: "6811d13ba10c927f2af4e484_bn.png",
        be: "6811d13aa10c927f2af4e417_be.png",
        bg: "6811d13aff0720343e23959f_bg.png",
        eh: "6811d13a78485e87cfdd9435_eh.png",
        ec: "6811d13af36e5a9b7883dea4_ec.png",
        ee: "6811d13abaee191612cb3612_ee.png",
        dz: "6811d13af36e5a9b7883de9e_dz.png",
        eg: "6811d13aaf642cba2d19461e_eg.png",
        do: "6811d13a36e5b4058af946ae_do.png",
        cz: "6811d138dc6ea6b0f487fa5f_cz.png",
        cy: "6811d1386734be3b3141a29c_cy.png",
        dk: "6811d1384271b985beddc4ea_dk.png",
        dm: "6811d138845ad6c8c92795f6_dm.png",
        dj: "6811d1387abc49b2c49fc915_dj.png",
        de: "6811d138574df6e355b15027_de.png",
        cu: "6811d1372969deaa287e6f28_cu.png",
        co: "6811d137fd9c07e5ce6177f1_co.png",
        cv: "6811d1374e456840069f9a72_cv.png",
        cx: "6811d137bdd17b1118c5ffe2_cx.png",
        cr: "6811d137af642cba2d194589_cr.png",
        cw: "6811d137e68f9c3633037af1_cw.png",
        ch: "6811d135dc6ea6b0f487f391_ch.png",
        cm: "6811d135eefdb37789446d12_cm.png",
        cl: "6811d1350e5d8639c6c5114e_cl.png",
        ck: "6811d13555858ad6eadb6c71_ck.png",
        ci: "6811d13525aeade0f4ad2eef_ci.png",
        cn: "6811d135a6b875a2542fc5bf_cn.png",
        as: "6811d1342faf1ca5f8fb8103_as.png",
        cg: "6811d133b98203355f410d95_cg.png",
        ca: "6811d133b9cb5aac61b15963_ca.png",
        cd: "6811d1336734be3b3141a04f_cd.png",
        bz: "6811d133dd9ffb99a934842f_bz.png",
        cf: "6811d13368d9b06096f78a63_cf.png",
        cc: "6811d13355858ad6eadb6b93_cc.png",
        sj: "6811d1333aa4c102fef53955_bv.png", ///
        br: "6811d1335769e5096bdfe6ed_br.png",
        bs: "6811d133d2d79b1ed31a31cf_bs.png",
        bt: "6811d13203eadde512232c68_bt.png",
        by: "6811d13278485e87cfdd9009_by.png",
        bw: "6811d1320e5d8639c6c51040_bw.png",
        bl: "6811d1318450c0504af1f5a6_bl.png",
        bm: "6811d13103eadde512232bd2_bm.png",
        bq: "6811d131845ad6c8c9278c9c_bq.png",
        bo: "6811d13102a8313841eb3f6d_bo.png",
        bj: "6811d131fd9c07e5ce617308_bj.png",
        bf: "6811d13168d9b06096f78947_bf.png",
        bi: "6811d130dc6ea6b0f487f150_bi.png",
        bh: "6811d130e2d6f6dc357ab82b_bh.png",
        bd: "6811d1304e456840069f95ee_bd.png",
        au: "6811d1309f72dd36d2e770cf_au.png",
        ba: "6811d13025aeade0f4ad2cb2_ba.png",
        az: "6811d130065dd259edcfa0a2_az.png",
        bb: "6811d130ae7b58af8325dec0_bb.png",
        aq: "6811d1306ec06edd685b9a5a_aq.png",
        aw: "6811d130ae7b58af8325de93_aw.png",
        ax: "6811d130b3c5e3d3a3c58a08_ax.png",
        at: "6811d13068d9b06096f78825_at.png",
        ar: "6811d12f25aeade0f4ad2c52_ar.png",
        ao: "6811d12fb3c5e3d3a3c589b1_ao.png",
        am: "6811d12f79c1a24f1a298b01_am.png",
        ad: "6811d12fb98203355f410a91_ad.png",
        ai: "6811d12fa6b875a2542fc34b_ai.png",
        al: "6811d12fb2874d989e198819_al.png",
        af: "6811d12fb2874d989e1987ef_af.png",
        ag: "6811d12f72a9d5793e2619c3_ag.png",
        ae: "6811d12f8450c0504af1f3c6_ae.png",
      };

      let userEmail = "",
        userPassword = "";

      let adsImpressed = [];

      function renderFooterNavSeries(series) {
        const footerNavSeries = $(".footer-nav-series");

        const footerNavListItemTemplate = footerNavSeries
          .find(".footer-nav-list-item")
          .first();
        series.forEach((item) => {
          const footerNavListItemBlock = footerNavListItemTemplate.clone(true);

          const navLink = footerNavListItemBlock.find(".footer-nav-link");
          navLink.text(item.name);
          navLink.attr("href", `/series?id=${item.id}`);

          footerNavSeries.append(footerNavListItemBlock);
        });
        footerNavListItemTemplate.hide();
      }

      function renderNavSeries(series) {
        const navMenuSeries = $(".nav-menu-series");

        const navMenuItemTemplate = navMenuSeries
          .find(".nav-menu-dropdown-item")
          .first();
        series.forEach((item, index) => {
          const navMenuItemBlock = navMenuItemTemplate.clone(true);

          navMenuItemBlock.text(item.name);
          navMenuItemBlock.attr("href", `/series?id=${item.id}`);
          if (index === series.length - 1) {
            navMenuItemBlock.css("border", "0px");
          }

          navMenuSeries.append(navMenuItemBlock);
        });
        navMenuItemTemplate.hide();
      }

      function renderNavs() {
        fetch(`${API_ENDPOINT}/rest/website/getSeries`, {
          credentials: "include",
        })
          .then((resp) => resp.json())
          .then((resp) => {
            if (resp.errorCode != 0 || !resp.payload) return;

            renderNavSeries(resp.payload);
            renderFooterNavSeries(resp.payload);
          });

        $(".nav-menu-dropdown-item.user-btn").click(function (e) {
          if (!isUserLoggedin()) {
            e.preventDefault();
            $(".menu-login")[0].click();
          }
        });

        $(".footer-nav-list-item.user-btn").click(function (e) {
          if (!isUserLoggedin()) {
            e.preventDefault();
            $(".menu-login")[0].click();
          }
        });
      }

      function confirmLogin(token = "") {
        const body = !token
          ? {
              identifier: userEmail,
              password: userPassword,
              appVersion: "website",
              isAndroid: false,
              withAds: true,
            }
          : {
              websiteLoginToken: token,
              appVersion: "website",
              isAndroid: false,
              withAds: true,
            };

        fetch(`${API_ENDPOINT}/rest/security/login`, {
          method: "POST",
          headers: {
            Accept: "application/json",
            "Content-Type": "application/json",
          },
          credentials: "include",
          body: JSON.stringify(body),
        })
          .then((resp) => resp.json())
          .then((resp) => {
            if (resp.errorCode == 0 && resp.payload) {
              if (!token)
                $(".login-confirm-button").closest(".modal-element").hide();

              if (resp.payload) {
                if (resp.payload.identity)
                  updateUserInfo(resp.payload.identity);
                if (resp.payload.ads) updateAds(resp.payload.ads);
              }
              resetPageView();
            } else {
              if (!token)
                $(".login-confirm-button")
                  .siblings(".form-error-message")
                  .show();
              else {
                updateUserLogin();
                $(".error-modal").css("display", "flex");
              }
            }
          })
          .catch((error) => {
            if (!token)
              $(".login-confirm-button").siblings(".form-error-message").show();
            else $(".error-modal").css("display", "flex");
          });
      }

      function bindOnboardingEvents() {
        $("#login-form").submit(function (e) {
          $(".login-modal .form-error-message").hide();

          e.preventDefault();

          const email = $("#login-email").val().trim();
          if (email == "") {
          } else {
            const formData = new FormData();
            formData.append("username", email);
            formData.append("fromWebsite", true);

            fetch(`${API_ENDPOINT}/rest/identity/initiateMobileLogin`, {
              method: "POST",
              body: formData,
            })
              .then((resp) => resp.text())
              .then((resp) => {
                const parser = new DOMParser();
                const respDoc = parser.parseFromString(resp, "text/xml");
                const userId =
                  respDoc.getElementsByTagName("userId")[0].childNodes[0]
                    .nodeValue;

                const emailConfirmedElement =
                  respDoc.getElementsByTagName("isEmailConfirmed")[0];
                const isEmailConfirmed =
                  emailConfirmedElement.childNodes.length > 0
                    ? emailConfirmedElement.childNodes[0].nodeValue
                    : "false";

                let errorMsg = "";
                if (!userId || userId == "-1")
                  errorMsg = "Email address not found. Please sign up.";
                else if (isEmailConfirmed != "true")
                  errorMsg =
                    "Please check your email to activate your account.";
                if (errorMsg) {
                  const elError = $(
                    ".login-modal .modal-form-container .form-error-message"
                  );
                  elError.text(errorMsg);
                  elError.show();
                } else {
                  $(".login-modal .modal-form-container").hide();
                  $(".login-modal .modal-success-container").show();

                  userEmail =
                    respDoc.getElementsByTagName("email")[0].childNodes[0]
                      .nodeValue;
                  if (
                    respDoc.getElementsByTagName("password")[0].childNodes
                      .length > 0
                  )
                    userPassword =
                      respDoc.getElementsByTagName("password")[0].childNodes[0]
                        .nodeValue;
                }
              });
          }
          return false;
        });

        $("#register-form").submit(function (e) {
          $(".register-modal .form-error-message").hide();

          e.preventDefault();

          const email = $("#register-email").val().trim();
          const username = $("#register-handle").val().trim();
          if (email == "" || username == "") {
          } else {
            let errorMsg = "";
            if (username.length < 4)
              errorMsg = "Handle name should contain at least 4 characters.";
            else if (!usernameRegex.test(username))
              errorMsg =
                "Handle name can contain only letters, digits and underscores.";
            if (errorMsg) {
              const elError = $(
                ".register-modal .modal-form-container .form-error-message"
              );
              elError.text(errorMsg);
              elError.show();
              return false;
            }

            const formData = new FormData();
            formData.append("identifier", email);
            formData.append("handleName", username);
            formData.append("fromWebsite", true);

            fetch(`${API_ENDPOINT}/rest/identity/register`, {
              method: "POST",
              body: formData,
            })
              .then((resp) => resp.text())
              .then((resp) => {
                const parser = new DOMParser();
                const respDoc = parser.parseFromString(resp, "text/xml");
                const statusCode =
                  respDoc.getElementsByTagName("statusCode")[0].childNodes[0]
                    .nodeValue;

                if (statusCode == "1000000") errorMsg = "Unknown error";
                else if (statusCode == "200")
                  errorMsg = "This email is already registered.";
                else if (statusCode == "201")
                  errorMsg = "This handle name already exists.";
                else if (statusCode == "202")
                  errorMsg =
                    "This email is not approved for registration in this platform.";
                if (errorMsg) {
                  const elError = $(
                    ".register-modal .modal-form-container .form-error-message"
                  );
                  elError.text(errorMsg);
                  elError.show();
                } else {
                  $(".register-modal .modal-form-container").hide();
                  $(".register-modal .modal-success-container").show();

                  userEmail =
                    respDoc.getElementsByTagName("identifier")[0].childNodes[0]
                      .nodeValue;

                  if (
                    respDoc.getElementsByTagName("password")[0].childNodes
                      .length > 0
                  )
                    userPassword =
                      respDoc.getElementsByTagName("password")[0].childNodes[0]
                        .nodeValue;
                }
              });
          }
          return false;
        });

        $(".login-confirm-button").click(function () {
          $(this).siblings(".form-error-message").css("display", "none");

          confirmLogin();
        });

        $(".menu-logout").click(function () {
          fetch(`${API_ENDPOINT}/rest/security/logout`, {
            method: "POST",
            credentials: "include",
          })
            .then((resp) => resp.json())
            .then((resp) => {
              if (resp.errorCode == 0) {
                localStorage.removeItem("userInfo");
                updateUserLogin();
                resetPageView();
              }
            });
        });

        $(".menu-public-profile").click(function () {
          const userId = getUserInfo("id");
          window.location.href = `/shooter/view?id=${userId}`;
        });

        $(".menu-login").click(function () {
          $("#login-form")[0].reset();
          $(".login-modal .modal-form-container").show();
          $(".login-modal .form-error-message").hide();
          $(".login-modal .modal-success-container").hide();
        });

        $(".menu-register").click(function () {
          $("#register-form")[0].reset();
          $(".register-modal .modal-form-container").show();
          $(".register-modal .form-error-message").hide();
          $(".register-modal .modal-success-container").hide();
        });
      }

      function updateUserInfo(payload) {
        const {
          id,
          firstName,
          lastName,
          email,
          handleName,
          profileImage,
          phone,
          country,
          isAdsSuperadmin,
        } = payload;
        localStorage.setItem(
          "userInfo",
          JSON.stringify({
            id,
            firstName,
            lastName,
            email,
            handleName,
            profileImage,
            phone,
            country,
            isAdsSuperadmin,
          })
        );
        updateUserLogin();
      }

      function updateAds(payload) {
        localStorage.setItem("ads", JSON.stringify(payload));
      }

      function getAd(adId) {
        const ads = JSON.parse(localStorage.getItem("ads"));
        if (ads["ads"][adId] && ads["ads"][adId].length > 0) {
          const adList = ads["ads"][adId];
          const randomIndex = Math.floor(Math.random() * adList.length);
          const adInfo = adList[randomIndex];

          let advs = "";
          if (ads["advs"] && ads["advs"].length > 0) {
            const advItem = ads["advs"].find((x) => x.id == adInfo["advId"]);
            advs = advItem["stringId"] || "";
          }
          const prefix = ads["imgUrlPrefix"] + advs + "/";
          return { advertiser: advs, prefix, adInfo };
        }
        return { adInfo: null };
      }

      function resetAds() {
        const adElements = $(".show-link");
        for (let element of adElements) {
          const adImage = $(element).find(".show-image");
          $(element).css("visibility", "hidden");
        }
      }

      function tagBannerAd(bannerIndex = -1) {
        if (!localStorage.hasOwnProperty("ads")) return;
        const adElements = $(".show-link.banner");
        for (let element of adElements) {
          let adId = $(element).data("ad");
          if (adsImpressed.includes(adId)) continue;
          const { advertiser, prefix, adInfo } = getAd(adId);
          if (!adInfo) continue;

          let adIndex = $(element).data("index");
          if (bannerIndex < 0 || (bannerIndex >= 0 && bannerIndex == adIndex)) {
            gtag("event", "AD_IMPRESSION", {
              impact_ad_placement: adId,
              impact_advertiser_name: advertiser,
              impact_advertiser_id: adInfo["advId"],
              impact_campaign_id: adInfo["id"],
              impact_platform: "Website",
            });
            // console.log('AD_IMPRESSION', {
            //  impact_ad_placement: adId,
            //  impact_advertiser_name: advertiser,
            //  impact_advertiser_id: adInfo["advId"],
            //  impact_campaign_id: adInfo["id"],
            //  impact_platform: 'Website'
            // });
            adsImpressed.push(adId);
          }
        }
      }

      function loadAds(isAlter = false, bannerIndex = -1) {
        if (!localStorage.hasOwnProperty("ads")) return;
        const adElements = $(".show-link");
        for (let element of adElements) {
          let alterUse = false;
          let adId = $(element).data("ad");
          if (isAlter) {
            const alterAd = $(element).data("ad-alter");
            if (!!alterAd && alterAd.length > 0) {
              adId = alterAd;
              alterUse = true;
            }
            $(element).data("alter-use", "true");
          }
          const { advertiser, prefix, adInfo } = getAd(adId);
          if (!adInfo) {
            $(element).remove();
            continue;
          }

          let adIndex = $(element).hasClass("banner")
            ? $(element).data("index")
            : -1;
          if (
            bannerIndex < 0 ||
            adIndex < 0 ||
            (bannerIndex >= 0 && bannerIndex == adIndex)
          ) {
            if (!adsImpressed.includes(adId)) {
              gtag("event", "AD_IMPRESSION", {
                impact_ad_placement: adId,
                impact_advertiser_name: advertiser,
                impact_advertiser_id: adInfo["advId"],
                impact_campaign_id: adInfo["id"],
                impact_platform: "Website",
              });
              // console.log('AD_IMPRESSION', {
              //  impact_ad_placement: adId,
              //  impact_advertiser_name: advertiser,
              //  impact_advertiser_id: adInfo["advId"],
              //  impact_campaign_id: adInfo["id"],
              //  impact_platform: 'Website'
              // });
              adsImpressed.push(adId);
            }
          }
          const adImage = $(element).find(".show-image");
          const imageUrl = prefix + adInfo["imgName"];
          adImage.attr("src", imageUrl);
          adImage.attr("srcset", imageUrl);

          $(element).attr("href", adInfo["url"]);
          $(element).css("visibility", "visible");
        }
      }

      function getUserInfo(fieldName) {
        const userInfo = JSON.parse(localStorage.getItem("userInfo"));
        return userInfo ? userInfo[fieldName] : null;
      }

      function getAccountName() {
        const firstName = getUserInfo("firstName");
        const lastName = getUserInfo("lastName");
        if (firstName || lastName) {
          const name = [firstName, lastName].filter((x) => x).join(" ");
          return name;
        }
        return getUserInfo("handleName");
      }

      function updateUserLogin() {
        if (!isUserLoggedin()) {
          $(".login-banner-menu").show();
          $(".account-banner-menu").hide();
          $(".login-nav-menu").removeClass("hidden").addClass("mobile-display");
          $(".account-nav-menu")
            .removeClass("mobile-display")
            .addClass("hidden");
          $(".header-nav-link.menu-logout")
            .removeClass("mobile-display")
            .addClass("hidden");
        } else {
          const accountName = getAccountName();
          const accountImage = getUserInfo("profileImage").previewUrl;
          const profileIcon =
            "https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/669e9e10f13e559525c0cc3a_Profile%20Icon.png";

          const accountIcon = $(".account-banner-menu .account-profile-icon");
          accountIcon.attr("src", accountImage || profileIcon);
          accountIcon.attr("srcset", accountImage || profileIcon);
          accountIcon.attr("alt", accountName);
          $(".account-banner-menu .account-profile-name").text(accountName);

          const navIcon = $(".account-nav-menu .account-profile-icon");
          navIcon.attr("src", accountImage || profileIcon);
          navIcon.attr("srcset", accountImage || profileIcon);
          navIcon.attr("alt", accountName);
          $(".account-nav-menu .account-profile-name").text(accountName);

          $(".login-banner-menu").hide();
          $(".account-banner-menu").show();
          $(".login-nav-menu").removeClass("mobile-display").addClass("hidden");
          $(".account-nav-menu")
            .removeClass("hidden")
            .addClass("mobile-display");
          $(".header-nav-link.menu-logout")
            .removeClass("hidden")
            .addClass("mobile-display");

          if (getUserInfo("isAdsSuperadmin")) {
            $(".menu-ads-management").show();
          } else {
            $(".menu-ads-management").hide();
          }
        }
      }

      function isUserLoggedin() {
        const userInfo = localStorage.getItem("userInfo");
        return !!userInfo;
      }

      function refreshSession() {
        const formData = new FormData();
        formData.append("isAndroid", false);
        formData.append("appVersion", "website");
        formData.append("withAds", true);

        fetch(`${API_ENDPOINT}/rest/security/refreshSession`, {
          method: "POST",
          credentials: "include",
          body: formData,
        })
          .then((resp) => resp.json())
          .then((resp) => {
            if (resp.errorCode != 0 || !resp.payload)
              localStorage.removeItem("userInfo");

            if (resp.payload) {
              if (resp.payload.ads) updateAds(resp.payload.ads);
              if (resp.payload.identity) updateUserInfo(resp.payload.identity);
              else updateUserLogin();
            } else updateUserLogin();
          })
          .catch((error) => {});
      }

      function decorateUrl(website) {
        if (
          website &&
          !website.startsWith("http://") &&
          !website.startsWith("https://")
        ) {
          website = "https://" + website;
        }
        return website;
      }

      function checkUserPermission() {
        if (!isUserLoggedin()) window.location.href = "/";
      }

      function makePlural(count, noun, suffix = "s", plural = "") {
        if (plural === "") return `${count} ${noun}${count > 1 ? suffix : ""}`;
        if (count > 1) return `${count} ${plural}`;
        return `${count} ${noun}`;
      }

      function formatLocation(country, usState, state, city, zipCode = "") {
        let location = [];
        if (city) location.push(city);

        const stateName = !!country && !!usState ? usState.name : state || "";
        const stateText = [stateName, zipCode].filter((x) => !!x).join(" ");
        if (!!stateText) location.push(stateText);
        if (!!country) location.push(country.name);
        return location.join(", ");
      }

      async function downloadVideo(url, filename) {
        if (!url) {
          alert("Please enter a video URL!");
          return;
        }
        $(".download-icon-text").text("Starting...");
        try {
          const isSafari = /^((?!chrome|android).)*safari/i.test(
            navigator.userAgent
          );

          const respHeader = await fetch(url, { mode: "cors", method: "HEAD" });
          const contentLength = respHeader.headers.get("content-length");

          if (!contentLength) throw new Error("Cannot determine file size!");

          const isIOSSafari =
            /^((?!chrome|android).)*safari/i.test(navigator.userAgent) &&
            /iPad|iPhone|iPod/.test(navigator.userAgent);
          if (isIOSSafari) {
            $(".download-icon-text").text("");
            // window.open(url, '_blank');
            const a = document.createElement("a");
            a.style.display = "none";
            a.href = url;
            a.target = "_blank";
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            return;
          }

          if (isSafari && contentLength >= 2000000000) {
            $(".download-icon-text").text("");
            window.open(url, "_blank");
            return;
          }
          const resp = await fetch(url, { mode: "cors" });
          const total = parseInt(contentLength, 10);

          let videoFile = filename;
          const cd = resp.headers.get("content-disposition");
          if (cd) {
            const match = cd.match(/filename="?([^"]+)"?/);
            if (match && match[1]) videoFile = match[1];
          }

          const fileStream = window.streamSaver.createWriteStream(videoFile);
          const writer = fileStream.getWriter();
          const reader = resp.body.getReader();

          let received = 0;
          function updateProgress() {
            const percent = Math.round((received / total) * 100);
            $(".download-icon-text").text(`${percent}%`);
          }
          while (true) {
            const { done, value } = await reader.read();
            if (done) break;
            received += value.length;
            updateProgress();
            await writer.write(value);
          }
          await writer.close();
          $(".download-icon-text").text("Download complete!");
          setTimeout(() => {
            $(".download-icon-text").text("");
          }, 500);
        } catch (error) {
          $(".download-icon-text").text("Error: " + error.message);
        }
      }
      function downloadFile(url, filename) {
        try {
          fetch(url)
            .then((response) => response.blob())
            .then((blob) => {
              saveAs(blob, filename);
            })
            .catch((error) => console.error("Download failed:", error));
        } catch (err) {
          alert("Download failed: " + err.message);
        }
      }

      function getFileNameFromUrl(url) {
        const match = url.match(/\/([^\/?#]+)(?:[?#]|$)/i);
        return match ? match[1] : null;
      }

      function escapeHTML(str) {
        return str.replace(/[&<>"'\/]/g, function (char) {
          switch (char) {
            case "&":
              return "&amp;";
            case "<":
              return "&lt;";
            case ">":
              return "&gt;";
            case '"':
              return "&quot;";
            case "\\":
              return "&#39;";
            case "/":
              return "&#x2F;";
            default:
              return char;
          }
        });
      }

      function dataURLtoFile(dataurl, filename) {
        var arr = dataurl.split(","),
          mime = arr[0].match(/:(.*?);/)[1],
          bstr = atob(arr[arr.length - 1]),
          n = bstr.length,
          u8arr = new Uint8Array(n);
        while (n--) {
          u8arr[n] = bstr.charCodeAt(n);
        }
        return new File([u8arr], filename, { type: mime });
      }

      function supportsHLS() {
        var video = document.createElement("video");
        return Boolean(
          video.canPlayType("application/vnd.apple.mpegURL") ||
          video.canPlayType("audio/mpegurl")
        );
      }

      $(document).ready(function () {
        resetAds();
        bindOnboardingEvents();
        renderNavs();

        $(".form-input-field").attr("autocomplete", "field-name-off");

        $(".form-input-layout").click(function (e) {
          if (!$(this).hasClass("dropdown")) {
            e.stopPropagation();
          }
          $(this).find(".form-input-field").focus();
        });

        let pageName = document.title.replace(/ /g, "").toLowerCase();
        if (document.location.pathname == "/") pageName = "landing";

        $(".show-link").click(function (e) {
          let adId = $(this).data("ad");
          let alterUse = $(this).data("alter-use");
          if (!!alterUse && alterUse == "true") {
            adId = $(this).data("ad-alter");
          }
          const { advertiser, prefix, adInfo } = getAd(adId);

          gtag("event", "AD_CLICK", {
            impact_ad_placement: adId,
            impact_advertiser_name: advertiser,
            impact_advertiser_id: adInfo["advId"],
            impact_campaign_id: adInfo["id"],
            impact_platform: "Website",
          });
          // console.log('AD_CLICK', {
          //  impact_ad_placement: adId,
          //  impact_advertiser_name: advertiser,
          //  impact_advertiser_id: adInfo["advId"],
          //  impact_campaign_id: adInfo["id"],
          //  impact_platform: 'Website'
          // });
        });

        $(".broadcast-brand-link").click(function (e) {
          const sponsorName = $(this).data("sponsor");

          gtag("event", "LIVE_STREAMING_SPONSOR_CLICK", {
            sponsor_name: sponsorName,
          });
        });

        const urlParams = new URLSearchParams(window.location.search);
        const websiteLoginToken = urlParams.get("websiteLoginToken");
        if (websiteLoginToken) {
          confirmLogin(websiteLoginToken);
          window.history.replaceState(null, "", window.location.pathname);
        } else refreshSession();

        $(".select-squad-modal .modal-overlay-element").on(
          "click",
          function (event) {
            const $content = $(".select-squad-modal .modal-content-element");
            if (
              !$content.is(event.target) &&
              $content.has(event.target).length === 0
            ) {
              $(".select-squad-modal").hide();
            }
          }
        );
      });

      $(document).on("keydown", "input[pattern]", function (e) {
        var input = $(this);
        var oldVal = input.val();
        var regex = new RegExp(input.attr("pattern"), "g");

        setTimeout(function () {
          var newVal = input.val();
          if (!regex.test(newVal)) {
            input.val(oldVal);
          }
        }, 1);
      });

      var PopupType = {
        SINGLE_BUTTON: 1,
        TWO_BUTTONS_VERTICAL: 2,
        NO_YES: 3,
        LOADER: 4,
        IMAGE_CROP: 5,
      };
      function hidePopup(popup) {
        popup.fadeOut(300, function () {
          popup.remove();
        });
      }
      function showPopup(options) {
        var defaultOptions = {
          maxWidth: "400px",
          icon: "error.svg",
          title: "No title",
          subtitle: "No subtitle",
          type: PopupType.SINGLE_BUTTON,
          buttons: [],
        };

        $.extend(defaultOptions, options);
        if (options.buttons == null) options.buttons = [];

        var htmlIcon = "";
        if (options.icon != null && options.icon != "") {
          htmlIcon =
            '\
   <div class="popup-icon">\
    <img src="/img/v3/' +
            options.icon +
            '">\
   </div>';
        }

        var htmlStart =
          '\
  <div class="popup">\
   <div class="popup-content modal-content-element" style="min-width: 0px; max-width: ' +
          options.maxWidth +
          '">\
    ' +
          htmlIcon +
          '\
    <div class="popup-title modal-title">' +
          options.title +
          "</div>";

        if (options.subtitle != null && options.subtitle != "") {
          htmlStart +=
            '<div class="popup-subtitle">' + options.subtitle + "</div>";
        }

        var htmlEnd =
          "\
   </div>\
  </div>";

        var htmlContent = "";
        switch (options.type) {
          case PopupType.SINGLE_BUTTON:
            if (options.buttons[0] == null) break;
            htmlContent =
              '\
    <div class="text-center">\
     <div class="modal-button" data-button-id="0">' +
              options.buttons[0].text +
              "</div>\
    </div>";
            break;
          case PopupType.TWO_BUTTONS_VERTICAL:
            if (options.buttons[0] == null || options.buttons[1] == null) break;
            htmlContent =
              '\
    <div class="text-center">\
     <div class="modal-button" data-button-id="0">' +
              options.buttons[0].text +
              '</div>\
     <div class="mt-3">\
      <span class="button-text" data-button-id="1">' +
              options.buttons[1].text +
              "</span>\
     </div>\
    </div>";
            break;
          case PopupType.NO_YES:
            if (options.buttons[0] == null || options.buttons[1] == null) break;
            htmlContent =
              '\
    <div class="modal-button-wrapper horizontal">\
     <div class="modal-button" data-button-id="0">' +
              options.buttons[0].text +
              '</div>\
     <div class="modal-button secondary" data-button-id="1">' +
              options.buttons[1].text +
              "</div>\
    </div>";
            break;
          case PopupType.LOADER:
            htmlContent =
              '\
    <div class="text-center">\
     <div class="sk-fading-circle blue inline">\
      <div class="sk-circle1 sk-circle"></div>\
      <div class="sk-circle2 sk-circle"></div>\
      <div class="sk-circle3 sk-circle"></div>\
      <div class="sk-circle4 sk-circle"></div>\
      <div class="sk-circle5 sk-circle"></div>\
      <div class="sk-circle6 sk-circle"></div>\
      <div class="sk-circle7 sk-circle"></div>\
      <div class="sk-circle8 sk-circle"></div>\
      <div class="sk-circle9 sk-circle"></div>\
      <div class="sk-circle10 sk-circle"></div>\
      <div class="sk-circle11 sk-circle"></div>\
      <div class="sk-circle12 sk-circle"></div>\
     </div>\
    </div>';
            break;
          case PopupType.IMAGE_CROP:
            if (options.buttons[0] == null || options.buttons[1] == null) break;

            htmlContent =
              '\
    <div class="cropper-image-container">\
     <img class="cropper-image-area" style="height:100%">\
    </div>\
    <div class="modal-button-wrapper horizontal">\
     <div class="modal-button" data-button-id="0">' +
              options.buttons[0].text +
              '</div>\
     <div class="modal-button secondary" data-button-id="1">' +
              options.buttons[1].text +
              "</div>\
    </div>";
            break;
        }

        var popupHtml = htmlStart + htmlContent + htmlEnd;
        $("#popups").append(popupHtml);
        var addedPopup = $("#popups > .popup").last();

        for (var i in options.buttons) {
          var addedPopupButton = addedPopup.find(
            '[data-button-id="' + i + '"]'
          );
          if (options.buttons[i].callback != null)
            addedPopupButton.click(options.buttons[i].callback);
          if (
            options.buttons[i].dontHideOnClick == null ||
            options.buttons[i].dontHideOnClick != true
          ) {
            addedPopupButton.click(function () {
              hidePopup(addedPopup);
            });
          }
        }
        addedPopup.fadeIn(300);
        addedPopup.css("display", "flex");
        return addedPopup;
      }

      function showImageCropPopup(dropzone, fileName) {
        showPopup({
          maxWidth: "90%", // '600px',
          icon: "",
          title: "Crop the image",
          subtitle: "",
          type: PopupType.IMAGE_CROP,
          buttons: [
            {
              text: "Crop",
              callback: function () {
                var croppedImgCanvas = $(".cropper-image-area").cropper(
                  "getCroppedCanvas"
                );
                var dataBlob = croppedImgCanvas.toBlob(function (blob) {
                  blob.lastModifiedDate = new Date();
                  blob.name = fileName;
                  blob.croppedFile = true;
                  dropzone.addFile(blob);
                  dropzone.enqueueFile(blob);
                });
              },
            },
            { text: "Cancel", callback: function () {} },
          ],
        });
      }

      function popupConfirmDelete(options) {
        if (
          options == null ||
          options.title == null ||
          options.subtitle == null ||
          options.id == null ||
          options.onConfirm == null
        )
          return;

        var popup = showPopup({
          maxWidth: options.maxWidth != null ? options.maxWidth : "400px",
          icon: "error-yellow.svg",
          title: options.title,
          subtitle: options.subtitle,
          type: PopupType.NO_YES,
          buttons: [
            { text: "No" },
            {
              text: "Yes",
              dontHideOnClick: true,
              callback: function () {
                options.onConfirm(options.id, popup);
              },
            },
          ],
        });
      }
      $.fn.simpleDropzone = function (options) {
        if (
          options.paramName == null ||
          options.url == null ||
          options.isResponseValid == null ||
          options.save == null ||
          options.clear == null
        )
          return false;

        var params = {
          paramName: options.paramName,
          url: options.url,
          maxFiles: options.maxFiles == null ? 2 : options.maxFiles,
          addRemoveLinks: options.maxFiles == null ? false : true,
          autoQueue: options.croppable ? false : true,
          thumbnailMethod: "contain",
          withCredentials: true,
        };

        if (options.croppable) {
          if (!options.hasOwnProperty("cropperAspectRatio"))
            options.cropperAspectRatio = 100.0 / 72;
          else
            params = {
              ...params,
              cropperAspectRatio: options.cropperAspectRatio,
            };
        }
        if (options.thumbnailWidth && options.thumbnailHeight)
          params = {
            ...params,
            thumbnailWidth: options.thumbnailWidth,
            thumbnailHeight: options.thumbnailHeight,
          };
        else params = { ...params, thumbnailWidth: 400, thumbnailHeight: 400 };

        var dropzoneParams = {
          ...params,
          success: function (file, response) {
            file.response = response;
            var success = options.isResponseValid(response, this);
            if (!success) {
              $(this.element).data("simpleDropzoneResponse", null);
              if (options.maxFiles == null) this.resetDropzone();
              else this.removeFile(file);
              return;
            }
            if (options.getImageUrlToDisplayAfterUpload != null) {
              this.resetDropzone();
              showExistingFileInDropzone(
                "#" + this.element.id,
                options.getImageUrlToDisplayAfterUpload(response)
              );
            }
            options.save(file, response);
          },
          error: function (file, response) {
            options.clear();
            this.resetDropzone();
            this.showError(response);
          },
          init: function () {
            options.clear();
            var _this = this;
            _this.prevFile = null;
            _this.on("addedfile", function (file) {
              if (
                !file.existingFile &&
                !file.croppedFile &&
                options.croppable
              ) {
                showImageCropPopup(_this, file.name);
                _this.removeFile(file);

                var reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                  $(".cropper-image-area").attr("src", reader.result);
                  $(".cropper-image-area").cropper("destroy");
                  $(".cropper-image-area").cropper({
                    aspectRatio: options.cropperAspectRatio,
                    viewMode: 0,
                    dragMode: "none",
                    scalable: false,
                    movable: false,
                    rotatable: false,
                    zoomable: false,
                    minCropBoxWidth: 30,
                    minCropBoxHeight: 30,
                    ready: function () {
                      if (options.cropperMode === "circle") {
                        $(".cropper-preview-area-top-container").addClass(
                          "circle"
                        );
                        $(".cropper-view-box").addClass("circle");
                      }
                    },
                    crop: function (event) {
                      var croppedImgCanvas = $(".cropper-image-area").cropper(
                        "getCroppedCanvas"
                      );
                      $(".cropper-preview-area").empty();
                      $(".cropper-preview-area").append(croppedImgCanvas);
                      $(".cropper-preview-area canvas")
                        .css("width", "100%")
                        .css("height", "100%");

                      var maxPreviewSizePx = 250;
                      var previewWidthPx = 0;
                      var previewHeightPx = 0;

                      if (options.cropperAspectRatio >= 1) {
                        previewWidthPx = maxPreviewSizePx;
                        previewHeightPx =
                          previewWidthPx / options.cropperAspectRatio;
                      } else {
                        previewHeightPx = maxPreviewSizePx;
                        previewWidthPx =
                          previewHeightPx * options.cropperAspectRatio;
                      }
                      $(".cropper-preview-area-top-container").css(
                        "width",
                        "" + previewWidthPx + "px"
                      );
                      $(".cropper-preview-area-top-container").css(
                        "height",
                        "" + previewHeightPx + "px"
                      );
                    },
                  });
                };
                return;
              }

              _this.on("removedfile", function (file) {
                options.clear();
              });

              if (options.allowFileUpload != null) {
                var proceed = options.allowFileUpload(file);
                if (!proceed) {
                  _this.removeFile(file);
                  return;
                }
              }
              $("#" + _this.element.id + " .dropzone-info-text").hide();
              if (options.maxFiles == null) {
                if (_this.prevFile !== null) _this.removeFile(_this.prevFile);
                _this.prevFile = file;
              }
            });

            _this.accept = function (file, done) {
              if (_this.files.length > options.maxFiles) {
                _this.removeFile(file);
                done();
                return;
              }
              if (options.validImageAspectRatio != null) {
                var reader = new FileReader();
                reader.addEventListener("loadend", function (event) {
                  var image = new Image();
                  image.onload = function () {
                    var aspectRatio = this.width / this.height;
                    var aspectRatioValidOrError =
                      options.validImageAspectRatio(aspectRatio);
                    if (aspectRatioValidOrError === true) {
                      done();
                      return;
                    }
                    _this.removeFile(file);
                    _this.showError(aspectRatioValidOrError);
                  };
                  image.src = event.target.result;
                });
                reader.readAsDataURL(file);
                return;
              }
              if (options.validImageDimensions != null) {
                var reader = new FileReader();
                reader.addEventListener("loadend", function (event) {
                  var image = new Image();
                  image.onload = function () {
                    var dimensionsValidOrError = options.validImageDimensions(
                      this.width,
                      this.height
                    );
                    if (dimensionsValidOrError === true) {
                      done();
                      return;
                    }
                    _this.removeFile(file);
                    _this.showError(dimensionsValidOrError);
                  };
                  image.src = event.target.result;
                });
                reader.readAsDataURL(file);
                return;
              }
              done();
            };
            _this.resetDropzone = function () {
              options.clear();
              _this.removeAllFiles(true);
              _this.prevFile = null;
            };
            _this.showError = function (errorMsg) {
              const elInfo = $("#" + _this.element.id + " .dropzone-info-text");
              elInfo.show();
              elInfo.addClass("error");
              elInfo.text(errorMsg);
            };
            $("#" + _this.element.id).addClass("dropzone");
          },
        };
        if (options.acceptedFiles != null)
          dropzoneParams.acceptedFiles = options.acceptedFiles;
        if (options.params != null) dropzoneParams.params = options.params;
        if (!dropzoneParams.params) dropzoneParams.params = {};
        if (options.headers != null) dropzoneParams.headers = options.headers;
        if (options.maxFilesize != null)
          dropzoneParams.maxFilesize = options.maxFilesize;
        $(this).dropzone(dropzoneParams);
      };
      function showExistingFileInDropzone(
        dropzoneSelector,
        fileUrl,
        filename,
        withThumbnail
      ) {
        if (filename === undefined) filename = "";
        if (withThumbnail === undefined) withThumbnail = true;

        var dropzone = $(dropzoneSelector)[0].dropzone;
        var thumb = {
          name: filename,
          size: 0,
          existingFile: true,
          dataURL: fileUrl + "?v=" + new Date().getTime(),
        };

        dropzone.files.push(thumb);
        dropzone.emit("addedfile", thumb);

        if (withThumbnail) {
          dropzone.createThumbnailFromUrl(
            thumb,
            dropzone.options.thumbnailWidth,
            dropzone.options.thumbnailHeight,
            dropzone.options.thumbnailMethod,
            true,
            function (thumbnail) {
              dropzone.emit("thumbnail", thumb, thumbnail);
            },
            "anonymous"
          );
        }
        dropzone.emit("complete", thumb);
      }
      function errorCodeToReadableLabel(errorCode) {
        return `errorCode: ${errorCode}`;
      }
      function destroyDropzone(dropzoneSelector) {
        var dropzone = $(dropzoneSelector)[0].dropzone;
        if (dropzone) {
          dropzone.destroy();
          $(dropzoneSelector).removeClass();
          $(dropzoneSelector).addClass("dropzone-upload-area");
          $(dropzoneSelector + " .dropzone-info-text").show();
        }
      }
      function resetDropzone(dropzoneSelector) {
        var dropzone = $(dropzoneSelector)[0].dropzone;
        if (!dropzone) return;
        dropzone.resetDropzone();
        $(dropzoneSelector + " .dropzone-info-text").show();
      }
    </script>
    <div id="popups"></div>
    <script>
      let matchId = "";
      let searchDivision = "",
        searchStage = "",
        searchCategory = "",
        searchCountry = "",
        sortBy = "",
        teamFilters = "",
        searchTerm = "";
      let isLoadingScores = false;
      let interval = undefined;
      let divisionItems = [],
        classificationItems = [],
        countryItems = [];
      let defaultClassificationId = -1;
      let allowsSortingByNrl22Total = false;
      let allowTeams = false;
      let powerFactorTieBreaker = false;
      let isTimePlus = false;

      let hasBonusStages = false,
        hasProPoints = false,
        hasScoreColumn = false;
      let impactsColumnName = "IMPACTS",
        impactsWithoutBonusColumnName = "IMPACTSWITHOUTBONUS",
        proPointsColumnName = "FINAL SCORE";

      const headerColumns = [
        "RANK",
        "COMPETITOR",
        "NAT",
        "TOTAL TIME",
        "SUCCESS RATE",
        "IMPACTSWITHOUTBONUS",
        "IMPACTS",
        "DROPPED",
        "SCORE",
        "FINAL SCORE",
        "DIVISION",
        "PROGRESS",
        "POWER FACTOR",
        "TIME",
        "PENALTIES TIME",
        "BONUSES TIME",
        "",
      ];

      const TEAM_FILTERS = [
        { id: "all", name: "All" },
        { id: "teams", name: "Teams only" },
        { id: "solo", name: "Solos only" },
      ];

      let loadedResults = false;

      function resetPageView() {
        $(".page-title").text("");

        if (matchId == "332") {
          $(".match-result-image1").show();
          $(".match-result-image2").show();
          $(".page-title").css("text-align", "center");
        } else {
          $(".match-result-image1").hide();
          $(".match-result-image2").hide();
        }

        var $dropdownElements = $(".dropdown-element");
        var count = $dropdownElements.length;
        $dropdownElements.each(function (index) {
          $(this).css("z-index", count - index);
        });

        isLoadingScores = false;
        getLiveScores();

        if (interval) {
          clearInterval(interval);
        }
        interval = setInterval(function () {
          getLiveScores(true);
        }, 10000);
      }

      function renderDivisionsDropdown(items) {
        const divisionsDropdown = $(".list-filters-divisions-dropdown");
        const divisionsDropdownList = divisionsDropdown
          .find(".dropdown-segment-list")
          .first();
        const divisionsDropdownSelected = divisionsDropdown
          .find(".dropdown-segment-selected")
          .first();

        const divisionsDropdownItemTemplate = divisionsDropdownList
          .find(".dropdown-list-item")
          .first();
        divisionsDropdownList
          .find(".dropdown-list-item")
          .not(":first")
          .remove();

        const _items = [{ id: "", name: "All Divisions" }, ...items];
        _items.forEach((item, index) => {
          const divisionsDropdownItemBlock =
            divisionsDropdownItemTemplate.clone(true);

          divisionsDropdownItemBlock.text(item.name);
          if (index === _items.length - 1) {
            divisionsDropdownItemBlock.css("border", "0px");
          }
          divisionsDropdownItemBlock.click(function (e) {
            divisionsDropdownSelected.text(item.name);
            searchDivision = item.id;
            divisionsDropdown.trigger("w-close");

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("division", item.id);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          });

          divisionsDropdownItemBlock.show();
          divisionsDropdownList.append(divisionsDropdownItemBlock);
        });
        divisionsDropdownItemTemplate.hide();
      }

      function renderStagesDropdown(items) {
        const stagesDropdown = $(".list-filters-stages-dropdown");
        const stagesDropdownList = stagesDropdown
          .find(".dropdown-segment-list")
          .first();
        const stagesDropdownSelected = stagesDropdown
          .find(".dropdown-segment-selected")
          .first();

        const stagesDropdownItemTemplate = stagesDropdownList
          .find(".dropdown-list-item")
          .first();
        stagesDropdownList.find(".dropdown-list-item").not(":first").remove();

        const _items = [{ id: "", name: "All Stages" }, ...items];
        _items.forEach((item, index) => {
          const stagesDropdownItemBlock =
            stagesDropdownItemTemplate.clone(true);

          stagesDropdownItemBlock.text(item.name);
          if (index === _items.length - 1) {
            stagesDropdownItemBlock.css("border", "0px");
          }
          stagesDropdownItemBlock.click(function (e) {
            stagesDropdownSelected.text(item.name);
            searchStage = item.id;
            stagesDropdown.trigger("w-close");

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("stage", item.id);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          });

          stagesDropdownItemBlock.show();
          stagesDropdownList.append(stagesDropdownItemBlock);
        });
        stagesDropdownItemTemplate.hide();
      }

      function renderCategoriesDropdown(items) {
        const categoriesDropdown = $(".list-filters-categories-dropdown");
        if (!items || items.length === 0) {
          categoriesDropdown.parent().hide();
          return;
        }
        const categoriesDropdownList = categoriesDropdown
          .find(".dropdown-segment-list")
          .first();
        const categoriesDropdownSelected = categoriesDropdown
          .find(".dropdown-segment-selected")
          .first();

        const categoriesDropdownItemTemplate = categoriesDropdownList
          .find(".dropdown-list-item")
          .first();
        categoriesDropdownList
          .find(".dropdown-list-item")
          .not(":first")
          .remove();

        const _items = [{ id: "", name: "All Categories" }, ...items];
        _items.forEach((item, index) => {
          const categoriesDropdownItemBlock =
            categoriesDropdownItemTemplate.clone(true);

          categoriesDropdownItemBlock.text(item.name);
          if (index === _items.length - 1) {
            categoriesDropdownItemBlock.css("border", "0px");
          }
          categoriesDropdownItemBlock.click(function (e) {
            categoriesDropdownSelected.text(item.name);
            searchCategory = item.id;
            categoriesDropdown.trigger("w-close");

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("category", item.id);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          });

          categoriesDropdownItemBlock.show();
          categoriesDropdownList.append(categoriesDropdownItemBlock);
        });
        categoriesDropdownItemTemplate.hide();
      }

      function renderCountryDropdown(items) {
        const countryDropdown = $(".list-filters-country-dropdown");
        if (!items || items.length === 0) {
          countryDropdown.parent().hide();
          return;
        }
        const countryDropdownList = countryDropdown
          .find(".dropdown-segment-list")
          .first();
        const countryDropdownSelected = countryDropdown
          .find(".dropdown-segment-selected")
          .first();

        const countryDropdownItemTemplate = countryDropdownList
          .find(".dropdown-list-item")
          .first();
        countryDropdownList.find(".dropdown-list-item").not(":first").remove();

        const _items = [{ id: "", name: "All Countries" }, ...items];
        _items.forEach((item, index) => {
          const countryDropdownItemBlock =
            countryDropdownItemTemplate.clone(true);

          countryDropdownItemBlock.text(item.name);
          if (index === _items.length - 1) {
            countryDropdownItemBlock.css("border", "0px");
          }
          countryDropdownItemBlock.click(function (e) {
            countryDropdownSelected.text(item.name);
            searchCountry = item.id;
            countryDropdown.trigger("w-close");

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("country", item.id);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          });

          countryDropdownItemBlock.show();
          countryDropdownList.append(countryDropdownItemBlock);
        });
        countryDropdownItemTemplate.hide();
      }

      function renderSortbyDropdown() {
        const sortByDropdown = $(".list-filters-sortby-dropdown");
        const sortByDropdownList = sortByDropdown
          .find(".dropdown-segment-list")
          .first();
        const sortByDropdownSelected = sortByDropdown
          .find(".dropdown-segment-selected")
          .first();

        const sortByDropdownItemTemplate = sortByDropdownList
          .find(".dropdown-list-item")
          .first();
        sortByDropdownList.find(".dropdown-list-item").not(":first").remove();

        let items = [];
        if (isTimePlus) {
          items = allowsSortingByNrl22Total
            ? ["Rank", "NRL22 Total"]
            : ["Rank"];
        } else {
          items = allowsSortingByNrl22Total
            ? ["Rank", "Success Rate", "NRL22 Total", "Dropped"]
            : ["Rank", "Success Rate", "Dropped"];
        }
        items.forEach((item, index) => {
          const sortByDropdownItemBlock =
            sortByDropdownItemTemplate.clone(true);

          sortByDropdownItemBlock.text(item);
          if (index === items.length - 1) {
            sortByDropdownItemBlock.css("border", "0px");
          }
          sortByDropdownItemBlock.click(function (e) {
            sortByDropdownSelected.text(item);
            sortBy = item;
            sortByDropdown.trigger("w-close");

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("sortBy", item);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          });

          sortByDropdownItemBlock.show();
          sortByDropdownList.append(sortByDropdownItemBlock);
        });
        sortByDropdownItemTemplate.hide();
      }

      function renderTeamFiltersDropdown() {
        const teamFiltersDropdown = $(".list-filters-team-dropdown");
        if (!allowTeams) {
          teamFiltersDropdown.parent().hide();
          return;
        }

        const teamFiltersDropdownList = teamFiltersDropdown
          .find(".dropdown-segment-list")
          .first();
        const teamFiltersDropdownSelected = teamFiltersDropdown
          .find(".dropdown-segment-selected")
          .first();

        const teamFiltersDropdownItemTemplate = teamFiltersDropdownList
          .find(".dropdown-list-item")
          .first();
        teamFiltersDropdownList
          .find(".dropdown-list-item")
          .not(":first")
          .remove();

        TEAM_FILTERS.forEach((item, index) => {
          const teamFiltersDropdownItemBlock =
            teamFiltersDropdownItemTemplate.clone(true);

          teamFiltersDropdownItemBlock.text(item.name);
          if (index === TEAM_FILTERS.length - 1) {
            teamFiltersDropdownItemBlock.css("border", "0px");
          }
          teamFiltersDropdownItemBlock.click(function (e) {
            teamFiltersDropdownSelected.text(item.name);
            teamFilters = item.id;
            teamFiltersDropdown.trigger("w-close");

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("teamFilters", item.id);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          });

          teamFiltersDropdownItemBlock.show();
          teamFiltersDropdownList.append(teamFiltersDropdownItemBlock);
        });
        teamFiltersDropdownItemTemplate.hide();
      }

      function getHeaderColumns() {
        let columnNames = headerColumns
          .map((x) => {
            if (isTimePlus) {
              if (
                x === "SUCCESS RATE" ||
                x === "IMPACTS" ||
                x === "DROPPED" ||
                x === "SCORE"
              )
                return null;
            }

            if (x === "TOTAL TIME") return isTimePlus ? "TOTAL TIME" : null;
            if (x === "IMPACTS") return impactsColumnName;
            if (x === "IMPACTSWITHOUTBONUS") {
              return hasBonusStages ? impactsWithoutBonusColumnName : null;
            }
            if (x === "FINAL SCORE") {
              return hasProPoints ? proPointsColumnName : null;
            }
            if (x === "SCORE") {
              return hasScoreColumn ? "SCORE" : null;
            }
            if (x === "TIME") {
              return isTimePlus
                ? "RAW TIME"
                : searchStage != ""
                  ? "TIME"
                  : null;
            }
            if (x === "PENALTIES TIME")
              return isTimePlus ? "PENALTIES TIME" : null;
            if (x === "BONUSES TIME") return isTimePlus ? "BONUSES TIME" : null;
            return x;
          })
          .filter((x) => x !== null);
        if (searchDivision !== "") {
          columnNames = columnNames.filter((x) => x !== "DIVISION");
        }
        if (searchStage !== "") {
          columnNames = columnNames.filter(
            (x) => x !== "" && x !== "POWER FACTOR"
          );
        } else {
          // columnNames = columnNames.filter(x => x !== "TIME" && x !== "RAW TIME");
          if (!powerFactorTieBreaker)
            columnNames = columnNames.filter((x) => x !== "POWER FACTOR");
        }
        return columnNames;
      }

      function renderCell(shooter, index, column, topShooterPoints) {
        let image = "",
          imageWrapperClass = [];

        const isTeam =
          shooter.shootAsTeam &&
          ((shooter.teammateShooterId && shooter.teammateShooterId != null) ||
            (shooter.teammateShooterEmail &&
              shooter.teammateShooterEmail != null));

        if (isTeam) {
          image =
            "https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/67e2ab58c5c520bdc49126fa_Group%20Icon.png";
          imageWrapperClass.push("bg-shooter-avatar-blue-large");
        } else if (shooter.profileImage && shooter.profileImage.thumbnailUrl) {
          image = shooter.profileImage.thumbnailUrl;
        } else {
          image =
            "https://cdn.prod.website-files.com/6694c6c29e02d8f65108d18a/66968441a6bce747c2812535_423516a2fdd4f1a6f590261de68adaa0_Leaderboard%20Profile.png";
          imageWrapperClass.push("bg-shooter-avatar-blue-large");
        }
        let html = "";
        if (column === "RANK") {
          html = `${shooter.rank}`; // `${index + 1}`;
        } else if (column === "COMPETITOR") {
          let classificationHTML = "";
          if (classificationItems.length > 0) {
            classificationHTML = `<div class="classification"></div>`;

            if (shooter.classificationId !== defaultClassificationId) {
              const classificationIndex = classificationItems.findIndex(
                (x) => x.id === shooter.classificationId
              );
              if (classificationIndex >= 0) {
                const classification = classificationItems[classificationIndex];
                classificationHTML = `<div class="classification"><p class="paragraph" style="background-color: #${classification.hexColor}">${classification.name}</p></div>`;
              }
            }
          }
          let statusHtml = "";
          if (shooter.isShootingNow) {
            statusHtml = `<div class="shooter-circle-status red"></div>`;
          } else if (shooter.isShootingNext) {
            statusHtml = `<div class="shooter-circle-status blue"></div>`;
          }

          const teamHtml = isTeam
            ? '<div class="paragraph team-status">TEAM</div>'
            : "";
          const shooterUrl = isTeam ? "#" : `/shooter/view?id=${shooter.id}`;
          html = `<div class="horizontal-flex vertical-centered"><a href="${shooterUrl}" class="horizontal-flex vertical-centered shooter-profile-cell"><div style="position:relative;"><div class="list-item-avatar-wrapper ${imageWrapperClass.join(" ")}"><img class="list-item-avatar" src="${image}"/></div>${statusHtml}</div><div class="vertical-flex"><p class="sub-heading medium">${shooter.name || "-"}</p><div class="horizontal-flex horizontal-centered"><p class="paragraph grey">${shooter.handleName}</p>${teamHtml}</div></div></a>${classificationHTML}</div>`;
        } else if (column === "NAT") {
          const flag1 = !!shooter.countryCode
            ? shooter.countryCode.toLowerCase()
            : null;
          const flag2 =
            isTeam &&
            !!shooter.secondShooter &&
            !!shooter.secondShooter.countryCode
              ? shooter.secondShooter.countryCode.toLowerCase()
              : null;

          const countryItem = countryItems.find(
            (x) => x.code == shooter.countryCode
          );
          const secondCountryItem = flag2
            ? countryItems.find(
                (x) => x.code == shooter.secondShooter.countryCode
              )
            : null;

          if (countryItem) {
            let flagHtml = "";
            if (!!flag1)
              flagHtml = `<p data-tooltip="${countryItem.name}" class="paragraph tooltip"><img class="country-flag" src="${FLAG_PREFIX}${FLAGS[flag1]}"/></p>`;
            if (isTeam && !!flag2) {
              flagHtml += `<p data-tooltip="${secondCountryItem.name}" class="paragraph tooltip"><img class="country-flag" src="${FLAG_PREFIX}${FLAGS[flag2]}"/></p>`;
            }
            html = `<div class="vertical-flex horizontal-centered">${flagHtml}</div>`;
          }
        } else if (column === "TOTAL TIME") {
          html = `${(Number(shooter.totalTimeHundredsOfSecond) / 100).toFixed(2)}`;
        } else if (column === "SUCCESS RATE") {
          html = `${Number(!shooter.maxPoints ? 0 : (shooter.points / shooter.maxPoints) * 100).toFixed(2)}%`;
        } else if (column === impactsColumnName) {
          const impacts = (
            shooter.points / 100 +
            (shooter.bonusPoints10k || 0) / 10000
          ).toFixed(3);
          html = `${Number(impacts)}`;
        } else if (column === "DROPPED") {
          const dropped = (shooter.dropped / 100).toFixed(3);
          html = `${Number(dropped)}`;
        } else if (column === impactsWithoutBonusColumnName) {
          const impacts = (
            shooter.pointsForNonBonusStages / 100 +
            (shooter.bonusPoints10kForNonBonusStages || 0) / 10000
          ).toFixed(3);
          html = `${Number(impacts)}`;
        } else if (column === proPointsColumnName) {
          const points = (shooter.proSeriesPoints10k / 10000).toFixed(4);
          html = `${Number(points)}`;
        } else if (column === "SCORE") {
          const shooterPoints =
            shooter.points / 100 + (shooter.bonusPoints10k || 0) / 10000;
          html = `${Number(!topShooterPoints ? 0 : (shooterPoints / topShooterPoints) * 100).toFixed(2)}%`;
        } else if (column === "DIVISION") {
          const division = divisionItems.find(
            (x) => x.id === shooter.divisionId
          );
          html = division ? division.name : "";
        } else if (column === "PROGRESS") {
          const matchDisqualifiedHtml =
            searchStage === "" && shooter.matchDisqualified
              ? "<strong style='color: #E00000'>DNF</strong>"
              : "";
          let stageCompletedHtml = `<span>${shooter.stagesProgressCount} / ${shooter.stagesCount} stages</span>`;
          if (searchStage !== "") {
            stageCompletedHtml = shooter.stageDisqualified
              ? "<strong style='color: #FF6060'>Disqualified</strong>"
              : shooter.stagesProgressCount === shooter.stagesCount
                ? "<span>Completed</span>"
                : "";
          }
          const shotsHtml = isTimePlus
            ? ""
            : `<span>${shooter.shotsProgressCount} / ${shooter.maxShots} shots</span>`;
          html = `<div class="vertical-flex">${matchDisqualifiedHtml}${stageCompletedHtml}${shotsHtml}</div>`;
        } else if (column === "POWER FACTOR") {
          html = shooter.powerFactor || "---";
        } else if (column === "TIME" || column === "RAW TIME") {
          html = `${(Number(shooter.hundredsOfSecond) / 100).toFixed(2)}`; // shooter.requiresTime
        } else if (column === "PENALTIES TIME") {
          html = `${(Number(shooter.penaltiesHundredsOfSecond) / 100).toFixed(2)}`;
        } else if (column === "BONUSES TIME") {
          html = `${(Number(shooter.bonusesHundredsOfSecond) / 100).toFixed(2)}`;
        } else if (column === "") {
          html = `<div class="horizontal-flex"><a href="/shooter/results?matchId=${matchId}&shooterId=${shooter.id}" class="list-item-button primary w-button">View Stages</a></div>`;
        } else {
        }
        return html;
      }

      function renderRow(shooter, index, topShooterPoints) {
        let newRow = $("<tr>", {
          class: `shooter-row-${shooter.id}`,
        });

        getHeaderColumns().forEach((column) => {
          const html = renderCell(shooter, index, column, topShooterPoints);
          newRow.append(
            $("<td>", {
              html: html,
            })
          );
        });
        return newRow;
      }

      function renderShooters(shooters) {
        let $table = $("<table>", {
          class: "data-table",
        });
        let $thead = $("<thead>", {
          class: "data-table-header",
        });
        let $tbody = $("<tbody>", {
          class: "data-table-body",
        });

        getHeaderColumns().forEach((column) => {
          $thead.append($(`<th>${column}</th>`));
        });

        let topShooterPoints = 0;
        if (shooters.length > 0) {
          let rankShooters = [...shooters];
          rankShooters.sort((x, y) => {
            const xPoints = x.points / 100 + (x.bonusPoints10k || 0) / 10000;
            const yPoints = y.points / 100 + (y.bonusPoints10k || 0) / 10000;
            return xPoints > yPoints ? -1 : 1;
          });
          topShooterPoints =
            rankShooters[0].points / 100 +
            (rankShooters[0].bonusPoints10k || 0) / 10000;
        }
        shooters.forEach((shooter, index) => {
          const newRow = renderRow(shooter, index, topShooterPoints);
          $tbody.append(newRow);
        });

        $table.append($thead);
        $table.append($tbody);

        $(".live-scores-wrapper").append($table);
      }

      function renderLiveShooters(shooters) {
        const tableBody = $(".data-table .data-table-body");

        let topShooterPoints = 0;
        if (shooters.length > 0) {
          let rankShooters = [...shooters];
          rankShooters.sort((x, y) => {
            const xPoints = x.points / 100 + (x.bonusPoints10k || 0) / 10000;
            const yPoints = y.points / 100 + (y.bonusPoints10k || 0) / 10000;
            return xPoints > yPoints ? -1 : 1;
          });
          topShooterPoints =
            rankShooters[0].points / 100 +
            (rankShooters[0].bonusPoints10k || 0) / 10000;
        }
        shooters.forEach((shooter, index) => {
          const shooterRow = tableBody.find(`tr.shooter-row-${shooter.id}`);

          let isNewRow = false;
          if (shooterRow) {
            const rowIndex = shooterRow.index();
            if (rowIndex == index) {
              getHeaderColumns().forEach((column, iCell) => {
                const html = renderCell(
                  shooter,
                  index,
                  column,
                  topShooterPoints
                );
                shooterRow.find("td").eq(iCell).html(html);
              });
            } else {
              shooterRow.remove();
              isNewRow = true;
            }
          } else {
            isNewRow = true;
          }
          if (isNewRow) {
            const newRow = renderRow(shooter, index, topShooterPoints);
            if (index === 0) tableBody.prepend(newRow);
            else {
              const indexRow = tableBody.find("tr").eq(index - 1);
              if (indexRow) {
                indexRow.after(newRow);
              } else {
                tableBody.append(newRow);
              }
            }
          }
        });
      }

      function getLiveScores(isLive = false) {
        if (isLoadingScores) return;

        const params = new URLSearchParams();
        params.append("matchId", matchId);
        if (searchDivision) params.append("divisionId", searchDivision);
        if (searchStage) params.append("stageId", searchStage);
        if (searchCategory) params.append("categoryId", searchCategory);
        if (searchCountry) params.append("countryId", searchCountry);
        if (sortBy) {
          params.append("sortBySuccessRate", sortBy === "Success Rate");
          params.append("sortByNrl22Total", sortBy === "NRL22 Total");
          params.append("sortByDropped", sortBy === "Dropped");
        }
        if (teamFilters) {
          params.append("filterTeamsOnly", teamFilters === "teams");
          params.append("filterSolosOnly", teamFilters === "solo");
        }

        if (searchTerm) params.append("searchTerm", searchTerm);
        params.append("dividePoints", false);

        isLoadingScores = true;
        fetch(
          `${API_ENDPOINT}/rest/website/getLiveScores?${params.toString()}`,
          {
            credentials: "include",
          }
        )
          .then((resp) => resp.json())
          .then((resp) => {
            isLoadingScores = false;

            if (resp.errorCode != 0 || !resp.payload) return;

            const {
              match,
              divisions,
              stages,
              categories,
              countries,
              classifications,
              shooters,
              impactsColumnName: _impactsColumnName,
              impactsWithoutBonusColumnName: _impactsWithoutBonusColumnName,
              hasBonusStages: _hasBonusStages,
              hasProPoints: _hasProPoints,
              proPointsColumnName: _proPointsColumnName,
              hasScoreColumn: _hasScoreColumn,
              allowsSortingByNrl22Total: _allowsSortingByNrl22Total,
              allowTeams: _allowTeams,
              powerFactorTieBreaker: _powerFactorTieBreaker,
            } = resp.payload;

            if (!match) {
              window.location.href = "/matches";
              return;
            }

            isTimePlus = !!match.timePlus;
            if (isLive) {
              renderLiveShooters(shooters);
            } else {
              $(".live-scores-wrapper").empty();

              $(".page-title").text(match.name + " Results");
              if (!searchDivision)
                $(
                  ".list-filters-divisions-dropdown .dropdown-segment-selected"
                ).text("All Divisions");
              else {
                const division = divisions.find((x) => x.id == searchDivision);
                $(
                  ".list-filters-divisions-dropdown .dropdown-segment-selected"
                ).text(division.name);
              }
              if (!searchStage)
                $(
                  ".list-filters-stages-dropdown .dropdown-segment-selected"
                ).text("All Stages");
              else {
                const stage = stages.find((x) => x.id == searchStage);
                $(
                  ".list-filters-stages-dropdown .dropdown-segment-selected"
                ).text(stage.name);
              }
              if (!searchCategory)
                $(
                  ".list-filters-categories-dropdown .dropdown-segment-selected"
                ).text("All Categories");
              else {
                const category = categories.find((x) => x.id == searchCategory);
                $(
                  ".list-filters-categories-dropdown .dropdown-segment-selected"
                ).text(category.name);
              }
              if (!searchCountry)
                $(
                  ".list-filters-country-dropdown .dropdown-segment-selected"
                ).text("All Countries");
              else {
                const country = countries.find((x) => x.id == searchCountry);
                $(
                  ".list-filters-country-dropdown .dropdown-segment-selected"
                ).text(country.name);
              }
              $(
                ".list-filters-sortby-dropdown .dropdown-segment-selected"
              ).text(sortBy || "Rank");

              if (!teamFilters) {
                $(
                  ".list-filters-team-dropdown .dropdown-segment-selected"
                ).text(TEAM_FILTERS[0].name);
              } else {
                const filter = TEAM_FILTERS.find((x) => x.id == teamFilters);
                $(
                  ".list-filters-team-dropdown .dropdown-segment-selected"
                ).text(filter.name);
              }
              classificationItems = [...classifications];
              defaultClassificationId = resp.payload.defaultClassificationId;
              divisionItems = [...divisions];
              impactsColumnName = _impactsColumnName;
              hasBonusStages = _hasBonusStages;
              impactsWithoutBonusColumnName = _impactsWithoutBonusColumnName;
              hasProPoints = _hasProPoints;
              proPointsColumnName = _proPointsColumnName;
              hasScoreColumn = _hasScoreColumn;
              allowsSortingByNrl22Total = _allowsSortingByNrl22Total;
              allowTeams = _allowTeams;
              powerFactorTieBreaker = _powerFactorTieBreaker;
              countryItems = [...countries];

              renderDivisionsDropdown(divisions);
              renderStagesDropdown(stages);
              renderCategoriesDropdown(categories);
              renderCountryDropdown(countries);
              renderSortbyDropdown();
              renderTeamFiltersDropdown();

              renderShooters(shooters);

              if (!loadedResults) {
                if (!match.matchStarted) {
                  $(".show-link").hide();
                } else if (match.matchStarted && !match.matchEnded) {
                  loadAds(false);
                } else if (match.matchEnded) {
                  loadAds(true);
                }
              }
              loadedResults = true;
            }

            $(".page-content").css("visibility", "visible");
          });
      }

      $(document).ready(function () {
        const urlParams = new URLSearchParams(window.location.search);
        matchId = urlParams.get("id");
        if (!matchId) {
          window.location.href = "/";
          return;
        }
        searchDivision = urlParams.get("division") || "";
        searchStage = urlParams.get("stage") || "";
        searchCategory = urlParams.get("category") || "";
        searchCountry = urlParams.get("country") || "";
        sortBy = urlParams.get("sortBy") || "";
        teamFilters = urlParams.get("teamFilters") || "";
        searchTerm = urlParams.get("search") || "";
        $(".list-filter-search-input").val(searchTerm);

        resetPageView();

        window.addEventListener("pageshow", function (event) {
          var historyTraversal =
            event.persisted ||
            (typeof window.performance != "undefined" &&
              window.performance.navigation.type === 2);
          if (historyTraversal) {
            resetPageView();
          }
        });

        $(".list-filter-search-input").keydown(function (e) {
          if (e.keyCode === 13) {
            return false;
          }
        });

        $(".list-filter-search-input").keyup(
          $.debounce(300, function () {
            searchTerm = $(this).val();

            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set("search", searchTerm);
            const newurl =
              window.location.protocol +
              "//" +
              window.location.host +
              window.location.pathname +
              "?" +
              urlParams.toString();
            window.history.pushState({ path: newurl }, "", newurl);

            getLiveScores();
          })
        );
      });
    </script>
  </body>
</html>
